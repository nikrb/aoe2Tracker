(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))n(l);new MutationObserver(l=>{for(const o of l)if(o.type==="childList")for(const r of o.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&n(r)}).observe(document,{childList:!0,subtree:!0});function i(l){const o={};return l.integrity&&(o.integrity=l.integrity),l.referrerPolicy&&(o.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?o.credentials="include":l.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(l){if(l.ep)return;l.ep=!0;const o=i(l);fetch(l.href,o)}})();function X(){}function wt(t){return t()}function Xe(){return Object.create(null)}function x(t){t.forEach(wt)}function Ie(t){return typeof t=="function"}function ae(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let we;function pe(t,e){return we||(we=document.createElement("a")),we.href=e,t===we.href}function St(t){return Object.keys(t).length===0}function zt(t){return t&&Ie(t.destroy)?t.destroy:X}function _(t,e){t.appendChild(e)}function S(t,e,i){t.insertBefore(e,i||null)}function R(t){t.parentNode&&t.parentNode.removeChild(t)}function ue(t,e){for(let i=0;i<t.length;i+=1)t[i]&&t[i].d(e)}function k(t){return document.createElement(t)}function U(t){return document.createTextNode(t)}function M(){return U(" ")}function Me(){return U("")}function G(t,e,i,n){return t.addEventListener(e,i,n),()=>t.removeEventListener(e,i,n)}function C(t,e,i){i==null?t.removeAttribute(e):t.getAttribute(e)!==i&&t.setAttribute(e,i)}function qt(t){return t===""?null:+t}function Mt(t){return Array.from(t.childNodes)}function D(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function Se(t,e){t.value=e??""}function Ze(t,e){for(let i=0;i<t.options.length;i+=1){const n=t.options[i];if(n.__value===e){n.selected=!0;return}}t.selectedIndex=-1}function Kt(t){const e=t.querySelector(":checked")||t.options[0];return e&&e.__value}function Je(t,e,i){t.classList[i?"add":"remove"](e)}let Ne;function ye(t){Ne=t}const _e=[],he=[],Ae=[],Pe=[],Et=Promise.resolve();let Be=!1;function Lt(){Be||(Be=!0,Et.then(Ct))}function ze(t){Ae.push(t)}function qe(t){Pe.push(t)}const Le=new Set;let de=0;function Ct(){if(de!==0)return;const t=Ne;do{try{for(;de<_e.length;){const e=_e[de];de++,ye(e),Ut(e.$$)}}catch(e){throw _e.length=0,de=0,e}for(ye(null),_e.length=0,de=0;he.length;)he.pop()();for(let e=0;e<Ae.length;e+=1){const i=Ae[e];Le.has(i)||(Le.add(i),i())}Ae.length=0}while(_e.length);for(;Pe.length;)Pe.pop()();Be=!1,Le.clear(),ye(t)}function Ut(t){if(t.fragment!==null){t.update(),x(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(ze)}}const Re=new Set;let se;function oe(){se={r:0,c:[],p:se}}function re(){se.r||x(se.c),se=se.p}function z(t,e){t&&t.i&&(Re.delete(t),t.i(e))}function B(t,e,i,n){if(t&&t.o){if(Re.has(t))return;Re.add(t),se.c.push(()=>{Re.delete(t),n&&(i&&t.d(1),n())}),t.o(e)}else n&&n()}function Ce(t,e,i){const n=t.$$.props[e];n!==void 0&&(t.$$.bound[n]=i,i(t.$$.ctx[n]))}function Q(t){t&&t.c()}function Z(t,e,i,n){const{fragment:l,after_update:o}=t.$$;l&&l.m(e,i),n||ze(()=>{const r=t.$$.on_mount.map(wt).filter(Ie);t.$$.on_destroy?t.$$.on_destroy.push(...r):x(r),t.$$.on_mount=[]}),o.forEach(ze)}function J(t,e){const i=t.$$;i.fragment!==null&&(x(i.on_destroy),i.fragment&&i.fragment.d(e),i.on_destroy=i.fragment=null,i.ctx=[])}function Ft(t,e){t.$$.dirty[0]===-1&&(_e.push(t),Lt(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function ce(t,e,i,n,l,o,r,s=[-1]){const u=Ne;ye(t);const d=t.$$={fragment:null,ctx:[],props:o,update:X,not_equal:l,bound:Xe(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(u?u.$$.context:[])),callbacks:Xe(),dirty:s,skip_bound:!1,root:e.target||u.$$.root};r&&r(d.root);let v=!1;if(d.ctx=i?i(t,e.props||{},(y,p,...b)=>{const h=b.length?b[0]:p;return d.ctx&&l(d.ctx[y],d.ctx[y]=h)&&(!d.skip_bound&&d.bound[y]&&d.bound[y](h),v&&Ft(t,y)),p}):[],d.update(),v=!0,x(d.before_update),d.fragment=n?n(d.ctx):!1,e.target){if(e.hydrate){const y=Mt(e.target);d.fragment&&d.fragment.l(y),y.forEach(R)}else d.fragment&&d.fragment.c();e.intro&&z(t.$$.fragment),Z(t,e.target,e.anchor,e.customElement),Ct()}ye(u)}class fe{$destroy(){J(this,1),this.$destroy=X}$on(e,i){if(!Ie(i))return X;const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(i),()=>{const l=n.indexOf(i);l!==-1&&n.splice(l,1)}}$set(e){this.$$set&&!St(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Pt=[{id:4,type:"archer",building:"archery"},{id:24,type:"archer",building:"archery"},{id:492,type:"archer",building:"archery"},{id:185,type:"slinger",building:"archery"},{id:7,type:"skirm",building:"archery"},{id:6,type:"skirm",building:"archery"},{id:1155,type:"skirm",building:"archery"},{id:1010,type:"genitour",building:"archery"},{id:1012,type:"genitour",building:"archery"},{id:5,type:"cannoneer",building:"archery"},{id:39,type:"cavarcher",building:"archery"},{id:474,type:"cavarcher",building:"archery"},{id:873,type:"elephantarcher",building:"archery"},{id:875,type:"elephantarcher",building:"archery"},{id:74,type:"swordsman",building:"barracks"},{id:75,type:"swordsman",building:"barracks"},{id:77,type:"swordsman",building:"barracks"},{id:473,type:"swordsman",building:"barracks"},{id:567,type:"swordsman",building:"barracks"},{id:93,type:"pikeman",building:"barracks"},{id:358,type:"pikeman",building:"barracks"},{id:359,type:"pikeman",building:"barracks"},{id:751,type:"eagle",building:"barracks"},{id:753,type:"eagle",building:"barracks"},{id:752,type:"eagle",building:"barracks"},{id:882,type:"condottiero",building:"barracks"},{id:448,type:"cav",building:"stable"},{id:546,type:"cav",building:"stable"},{id:441,type:"cav",building:"stable"},{id:1707,type:"cav",building:"stable"},{id:1751,type:"shrivamsha",building:"stable"},{id:1753,type:"shrivamsha",building:"stable"},{id:38,type:"knight",building:"stable"},{id:283,type:"knight",building:"stable"},{id:569,type:"knight",building:"stable"},{id:1370,type:"lancer",building:"stable"},{id:1372,type:"lancer",building:"stable"},{id:1755,type:"cavcamel",building:"stable"},{id:329,type:"cavcamel",building:"stable"},{id:330,type:"cavcamel",building:"stable"},{id:5419,type:"cavcamel",building:"stable"},{id:1132,type:"elephant",building:"stable"},{id:1134,type:"elephant",building:"stable"},{id:1570,type:"xolotl",building:"stable"},{id:1258,type:"ram",building:"workshop"},{id:422,type:"ram",building:"workshop"},{id:548,type:"ram",building:"workshop"},{id:279,type:"Scorpion",building:"workshop"},{id:542,type:"Scorpion",building:"workshop"},{id:280,type:"Mangonel",building:"workshop"},{id:550,type:"Mangonel",building:"workshop"},{id:588,type:"Mangonel",building:"workshop"},{id:36,type:"bbc",building:"workshop"},{id:1709,type:"bbc",building:"workshop"},{id:1105,type:"siege tower",building:"workshop"},{id:1744,type:"elephant seige",building:"workshop"},{id:1746,type:"elephant seige",building:"workshop"}],Bt=[{id:22,tech:"Loom",type:"unique",building:"eco"},{id:8,tech:"Town Watch",type:"los",building:"eco"},{id:280,tech:"Town Patrol",type:"los",building:"eco"},{id:213,tech:"Wheel Barrow",type:"vil speed",building:"eco"},{id:249,tech:"Hand Cart",type:"vil speed",building:"eco"},{id:199,tech:"Fletching",type:"attack",building:"blacksmith"},{id:200,tech:"Bodkin Arrow",type:"attack",building:"blacksmith"},{id:201,tech:"Bracer",type:"attack",building:"blacksmith"},{id:211,tech:"Padded Archer Armor",type:"armour",building:"blacksmith"},{id:212,tech:"Leather Archer Armor",type:"armour",building:"blacksmith"},{id:219,tech:"Ring Archer Armor",type:"armour",building:"blacksmith"},{id:67,tech:"Forging",type:"attack",building:"blacksmith"},{id:68,tech:"Iron casting",type:"attack",building:"blacksmith"},{id:75,tech:"Blast Furnace",type:"attack",building:"blacksmith"},{id:81,tech:"Scale Barding Armor",type:"armour",building:"blacksmith"},{id:82,tech:"Chain Barding Armor",type:"armour",building:"blacksmith"},{id:80,tech:"Plate Barding Armor",type:"armour",building:"blacksmith"},{id:74,tech:"Scale Mail Armor",type:"armour",building:"blacksmith"},{id:76,tech:"Chain Mail Armor",type:"armour",building:"blacksmith"},{id:77,tech:"Plate Mail Armor",type:"armour",building:"blacksmith"},{id:437,tech:"Thumb Ring",type:"unique",building:"archery"},{id:436,tech:"Parthian Tactics",type:"unique",building:"archery"},{id:716,tech:"Supplies",type:"unique",building:"barracks"},{id:215,tech:"Squires",type:"unique",building:"barracks"},{id:602,tech:"Arson",type:"unique",building:"barracks"},{id:435,tech:"Bloodlines",type:"unique",building:"stable"},{id:39,tech:"Husbandry",type:"unique",building:"stable"},{id:321,tech:"Sappers",type:"unique",building:"castle"},{id:315,tech:"Conscription",type:"unique",building:"castle"},{id:379,tech:"Hoardings",type:"unique",building:"castle"},{id:408,tech:"Spies",type:"unique",building:"castle"},{id:50,tech:"Masonry",type:"building hp",building:"university"},{id:51,tech:"Architecture",type:"building hp",building:"university"},{id:93,tech:"Ballistics",type:"unique",building:"university"},{id:47,tech:"Chemistry",type:"unique",building:"university"},{id:140,tech:"Guard Tower",type:"tower",building:"university"},{id:63,tech:"Keep",type:"tower",building:"university"},{id:64,tech:"Bombard Tower",type:"unique",building:"university"},{id:322,tech:"Murder Holes",type:"unique",building:"university"},{id:377,tech:"Siege Engineers",type:"unique",building:"university"},{id:380,tech:"Heated Shot",type:"unique",building:"university"},{id:608,tech:"Arrowslits",type:"unique",building:"university"},{id:194,tech:"Fortified Wall",type:"unique",building:"university"},{id:231,tech:"Sanctity",type:"unique",building:"monastery"},{id:252,tech:"Fervor",type:"unique",building:"monastery"},{id:316,tech:"Redemption",type:"unique",building:"monastery"},{id:319,tech:"Atonement",type:"unique",building:"monastery"},{id:439,tech:"Heresy",type:"unique",building:"monastery"},{id:441,tech:"Herbal Medicine",type:"unique",building:"monastery"},{id:45,tech:"Faith",type:"unique",building:"monastery"},{id:230,tech:"Block Printing",type:"unique",building:"monastery"},{id:233,tech:"Illumination",type:"unique",building:"monastery"},{id:438,tech:"Theocracy",type:"unique",building:"monastery"},{id:55,tech:"Gold Mining",type:"gold",building:"eco"},{id:182,tech:"Gold Shaft Mining",type:"gold",building:"eco"},{id:278,tech:"Stone Mining",type:"stone",building:"eco"},{id:279,tech:"Stone Shaft Mining",type:"stone",building:"eco"},{id:202,tech:"Double Bit Axe",type:"wood",building:"eco"},{id:203,tech:"Bow Saw",type:"wood",building:"eco"},{id:221,tech:"Two Man Saw",type:"wood",building:"eco"},{id:14,tech:"Horse collar",type:"food",building:"eco"},{id:13,tech:"Heavy plow",type:"food",building:"eco"},{id:12,tech:"Crop rotation",type:"food",building:"eco"}];function Ye(t){let e,i,n,l,o=t[0].info_list[t[1]].Cost.Wood+"",r;return{c(){e=k("img"),n=M(),l=k("span"),r=U(o),pe(e.src,i="https://aoe2techtree.net/img/wood.png")||C(e,"src",i),C(e,"class","svelte-dkpzzt"),C(l,"class","cost svelte-dkpzzt")},m(s,u){S(s,e,u),S(s,n,u),S(s,l,u),_(l,r)},p(s,u){u&3&&o!==(o=s[0].info_list[s[1]].Cost.Wood+"")&&D(r,o)},d(s){s&&R(e),s&&R(n),s&&R(l)}}}function Qe(t){let e,i,n,l,o=t[0].info_list[t[1]].Cost.Food+"",r;return{c(){e=k("img"),n=M(),l=k("span"),r=U(o),pe(e.src,i="https://aoe2techtree.net/img/food.png")||C(e,"src",i),C(e,"class","svelte-dkpzzt"),C(l,"class","cost svelte-dkpzzt")},m(s,u){S(s,e,u),S(s,n,u),S(s,l,u),_(l,r)},p(s,u){u&3&&o!==(o=s[0].info_list[s[1]].Cost.Food+"")&&D(r,o)},d(s){s&&R(e),s&&R(n),s&&R(l)}}}function xe(t){let e,i,n,l,o=t[0].info_list[t[1]].Cost.Gold+"",r;return{c(){e=k("img"),n=M(),l=k("span"),r=U(o),pe(e.src,i="https://aoe2techtree.net/img/gold.png")||C(e,"src",i),C(e,"class","svelte-dkpzzt"),C(l,"class","cost svelte-dkpzzt")},m(s,u){S(s,e,u),S(s,n,u),S(s,l,u),_(l,r)},p(s,u){u&3&&o!==(o=s[0].info_list[s[1]].Cost.Gold+"")&&D(r,o)},d(s){s&&R(e),s&&R(n),s&&R(l)}}}function et(t){let e,i,n,l,o=t[0].info_list[t[1]].Cost.stone+"",r;return{c(){e=k("img"),n=M(),l=k("span"),r=U(o),pe(e.src,i="https://aoe2techtree.net/img/stone.png")||C(e,"src",i),C(e,"class","svelte-dkpzzt"),C(l,"class","cost svelte-dkpzzt")},m(s,u){S(s,e,u),S(s,n,u),S(s,l,u),_(l,r)},p(s,u){u&3&&o!==(o=s[0].info_list[s[1]].Cost.stone+"")&&D(r,o)},d(s){s&&R(e),s&&R(n),s&&R(l)}}}function It(t){let e,i,n=t[0].info_list[t[1]].ResearchTime+"",l;return{c(){e=k("div"),i=U("Research: "),l=U(n)},m(o,r){S(o,e,r),_(e,i),_(e,l)},p(o,r){r&3&&n!==(n=o[0].info_list[o[1]].ResearchTime+"")&&D(l,n)},d(o){o&&R(e)}}}function Nt(t){let e,i,n=t[0].info_list[t[1]].HP+"",l,o,r=t[0].info_list[t[1]].TrainTime+"",s,u,d,v,y=t[0].info_list[t[1]].Attack+"",p,b,h=t[0].info_list[t[1]].MeleeArmor+"",q,E,g=t[0].info_list[t[1]].PierceArmor+"",a,K,c,w,m=t[0].info_list[t[1]].Range+"",O,ee,j,$,te,Y=t[0].info_list[t[1]].Speed+"",W,L,F=t[0].info_list[t[1]].LineOfSight+"",N,H=t[0].info_list[t[1]].MinRange!==0&&tt(t);return{c(){e=k("div"),i=U("HP: "),l=U(n),o=U(`\r
        Train: `),s=U(r),u=M(),d=k("div"),v=U("Atck: "),p=U(y),b=U(`\r
        Armr: `),q=U(h),E=U(`/\r
                `),a=U(g),K=M(),c=k("div"),w=U("Range: "),O=U(m),ee=M(),H&&H.c(),j=M(),$=k("div"),te=U("Spd: "),W=U(Y),L=U(`\r
        LOS: `),N=U(F)},m(T,I){S(T,e,I),_(e,i),_(e,l),_(e,o),_(e,s),S(T,u,I),S(T,d,I),_(d,v),_(d,p),_(d,b),_(d,q),_(d,E),_(d,a),S(T,K,I),S(T,c,I),_(c,w),_(c,O),_(c,ee),H&&H.m(c,null),S(T,j,I),S(T,$,I),_($,te),_($,W),_($,L),_($,N)},p(T,I){I&3&&n!==(n=T[0].info_list[T[1]].HP+"")&&D(l,n),I&3&&r!==(r=T[0].info_list[T[1]].TrainTime+"")&&D(s,r),I&3&&y!==(y=T[0].info_list[T[1]].Attack+"")&&D(p,y),I&3&&h!==(h=T[0].info_list[T[1]].MeleeArmor+"")&&D(q,h),I&3&&g!==(g=T[0].info_list[T[1]].PierceArmor+"")&&D(a,g),I&3&&m!==(m=T[0].info_list[T[1]].Range+"")&&D(O,m),T[0].info_list[T[1]].MinRange!==0?H?H.p(T,I):(H=tt(T),H.c(),H.m(c,null)):H&&(H.d(1),H=null),I&3&&Y!==(Y=T[0].info_list[T[1]].Speed+"")&&D(W,Y),I&3&&F!==(F=T[0].info_list[T[1]].LineOfSight+"")&&D(N,F)},d(T){T&&R(e),T&&R(u),T&&R(d),T&&R(K),T&&R(c),H&&H.d(),T&&R(j),T&&R($)}}}function tt(t){let e,i=t[0].info_list[t[1]].MinRange+"",n;return{c(){e=U("(min): "),n=U(i)},m(l,o){S(l,e,o),S(l,n,o)},p(l,o){o&3&&i!==(i=l[0].info_list[l[1]].MinRange+"")&&D(n,i)},d(l){l&&R(e),l&&R(n)}}}function Ot(t){let e,i,n=t[0].info_list[t[1]].name+"",l,o,r,s,u,d,v,y=typeof t[0].info_list[t[1]].Cost.Wood<"u"&&Ye(t),p=typeof t[0].info_list[t[1]].Cost.Food<"u"&&Qe(t),b=typeof t[0].info_list[t[1]].Cost.Gold<"u"&&xe(t),h=typeof t[0].info_list[t[1]].Cost.stone<"u"&&et(t);function q(a,K){return a[0].info_type==="unit"?Nt:It}let E=q(t),g=E(t);return{c(){e=k("div"),i=k("div"),l=U(n),o=M(),r=k("div"),y&&y.c(),s=M(),p&&p.c(),u=M(),b&&b.c(),d=M(),h&&h.c(),v=M(),g.c(),C(r,"class","cost-outer svelte-dkpzzt"),C(e,"class","outer svelte-dkpzzt")},m(a,K){S(a,e,K),_(e,i),_(i,l),_(e,o),_(e,r),y&&y.m(r,null),_(r,s),p&&p.m(r,null),_(r,u),b&&b.m(r,null),_(r,d),h&&h.m(r,null),_(e,v),g.m(e,null)},p(a,[K]){K&3&&n!==(n=a[0].info_list[a[1]].name+"")&&D(l,n),typeof a[0].info_list[a[1]].Cost.Wood<"u"?y?y.p(a,K):(y=Ye(a),y.c(),y.m(r,s)):y&&(y.d(1),y=null),typeof a[0].info_list[a[1]].Cost.Food<"u"?p?p.p(a,K):(p=Qe(a),p.c(),p.m(r,u)):p&&(p.d(1),p=null),typeof a[0].info_list[a[1]].Cost.Gold<"u"?b?b.p(a,K):(b=xe(a),b.c(),b.m(r,d)):b&&(b.d(1),b=null),typeof a[0].info_list[a[1]].Cost.stone<"u"?h?h.p(a,K):(h=et(a),h.c(),h.m(r,null)):h&&(h.d(1),h=null),E===(E=q(a))&&g?g.p(a,K):(g.d(1),g=E(a),g&&(g.c(),g.m(e,null)))},i:X,o:X,d(a){a&&R(e),y&&y.d(),p&&p.d(),b&&b.d(),h&&h.d(),g.d()}}}function $t(t,e,i){let{info:n,info_index:l}=e;return t.$$set=o=>{"info"in o&&i(0,n=o.info),"info_index"in o&&i(1,l=o.info_index)},[n,l]}class Ht extends fe{constructor(e){super(),ce(this,e,$t,Ot,ae,{info:0,info_index:1})}}function it(t,e,i){const n=t.slice();return n[9]=e[i],n[11]=i,n}function nt(t,e,i){const n=t.slice();return n[9]=e[i],n[11]=i,n}function lt(t){let e,i,n;function l(){return t[7](t[11])}return{c(){e=k("div"),C(e,"class","dotred svelte-ft07xz")},m(o,r){S(o,e,r),i||(n=[G(e,"mouseenter",l),G(e,"mouseleave",t[4])],i=!0)},p(o,r){t=o},d(o){o&&R(e),i=!1,x(n)}}}function ot(t){let e,i,n;function l(){return t[8](t[11])}return{c(){e=k("div"),C(e,"class","dot svelte-ft07xz")},m(o,r){S(o,e,r),i||(n=[G(e,"mouseenter",l),G(e,"mouseleave",t[4])],i=!0)},p(o,r){t=o},d(o){o&&R(e),i=!1,x(n)}}}function rt(t){let e,i,n;return i=new Ht({props:{info:t[0],info_index:t[2]}}),{c(){e=k("div"),Q(i.$$.fragment),C(e,"class","popup svelte-ft07xz")},m(l,o){S(l,e,o),Z(i,e,null),n=!0},p(l,o){const r={};o&1&&(r.info=l[0]),o&4&&(r.info_index=l[2]),i.$set(r)},i(l){n||(z(i.$$.fragment,l),n=!0)},o(l){B(i.$$.fragment,l),n=!1},d(l){l&&R(e),J(i)}}}function jt(t){let e,i,n,l,o,r,s,u,d,v,y,p,b=Array(t[0].researched),h=[];for(let a=0;a<b.length;a+=1)h[a]=lt(nt(t,b,a));let q=Array(t[0].available-t[0].researched),E=[];for(let a=0;a<q.length;a+=1)E[a]=ot(it(t,q,a));let g=t[1]&&rt(t);return{c(){e=k("div"),i=k("div"),n=k("div"),l=k("img"),r=M(),s=k("div");for(let a=0;a<h.length;a+=1)h[a].c();u=M();for(let a=0;a<E.length;a+=1)E[a].c();d=M(),g&&g.c(),pe(l.src,o="https://aoe2techtree.net/img/"+t[0].info_type.replace(/\S/,st)+"s/"+t[0].info_list[t[0].researched<t[0].available-1?t[0].researched:t[0].available-1].id+".png")||C(l,"src",o),C(l,"alt","unit pic"),C(l,"class","svelte-ft07xz"),C(n,"class","icons svelte-ft07xz"),C(s,"class","row svelte-ft07xz"),C(i,"class","popup-container svelte-ft07xz"),C(e,"class","col svelte-ft07xz")},m(a,K){S(a,e,K),_(e,i),_(i,n),_(n,l),_(i,r),_(i,s);for(let c=0;c<h.length;c+=1)h[c].m(s,null);_(s,u);for(let c=0;c<E.length;c+=1)E[c].m(s,null);_(s,d),g&&g.m(s,null),v=!0,y||(p=[G(e,"click",t[5]),G(e,"keydown",Dt)],y=!0)},p(a,[K]){if((!v||K&1&&!pe(l.src,o="https://aoe2techtree.net/img/"+a[0].info_type.replace(/\S/,st)+"s/"+a[0].info_list[a[0].researched<a[0].available-1?a[0].researched:a[0].available-1].id+".png"))&&C(l,"src",o),K&25){b=Array(a[0].researched);let c;for(c=0;c<b.length;c+=1){const w=nt(a,b,c);h[c]?h[c].p(w,K):(h[c]=lt(w),h[c].c(),h[c].m(s,u))}for(;c<h.length;c+=1)h[c].d(1);h.length=b.length}if(K&25){q=Array(a[0].available-a[0].researched);let c;for(c=0;c<q.length;c+=1){const w=it(a,q,c);E[c]?E[c].p(w,K):(E[c]=ot(w),E[c].c(),E[c].m(s,d))}for(;c<E.length;c+=1)E[c].d(1);E.length=q.length}a[1]?g?(g.p(a,K),K&2&&z(g,1)):(g=rt(a),g.c(),z(g,1),g.m(s,null)):g&&(oe(),B(g,1,1,()=>{g=null}),re())},i(a){v||(z(g),v=!0)},o(a){B(g),v=!1},d(a){a&&R(e),ue(h,a),ue(E,a),g&&g.d(),y=!1,x(p)}}}function Dt(){}const st=t=>t.toUpperCase();function Gt(t,e,i){let{info:n,onResearched:l}=e,o=!1,r=0;const s=p=>{i(1,o=!0),i(2,r=p)},u=()=>i(1,o=!1);function d(){l(n)}const v=p=>s(p),y=p=>s(p);return t.$$set=p=>{"info"in p&&i(0,n=p.info),"onResearched"in p&&i(6,l=p.onResearched)},[n,o,r,s,u,d,l,v,y]}class Ke extends fe{constructor(e){super(),ce(this,e,Gt,jt,ae,{info:0,onResearched:6})}}function ut(t,e,i){const n=t.slice();return n[5]=e[i],n}function at(t,e,i){const n=t.slice();return n[8]=e[i],n}function ct(t,e,i){const n=t.slice();return n[11]=e[i],n}function ft(t,e,i){const n=t.slice();return n[8]=e[i],n}function dt(t){let e,i;return e=new Ke({props:{onResearched:t[3],info:t[8]}}),{c(){Q(e.$$.fragment)},m(n,l){Z(e,n,l),i=!0},p(n,l){const o={};l&2&&(o.info=n[8]),e.$set(o)},i(n){i||(z(e.$$.fragment,n),i=!0)},o(n){B(e.$$.fragment,n),i=!1},d(n){J(e,n)}}}function _t(t){let e=t[8].building.includes(t[5].name)&&t[8].type!=="unique",i,n,l=e&&dt(t);return{c(){l&&l.c(),i=Me()},m(o,r){l&&l.m(o,r),S(o,i,r),n=!0},p(o,r){r&2&&(e=o[8].building.includes(o[5].name)&&o[8].type!=="unique"),e?l?(l.p(o,r),r&2&&z(l,1)):(l=dt(o),l.c(),z(l,1),l.m(i.parentNode,i)):l&&(oe(),B(l,1,1,()=>{l=null}),re())},i(o){n||(z(l),n=!0)},o(o){B(l),n=!1},d(o){l&&l.d(o),o&&R(i)}}}function ht(t){let e,i;return e=new Ke({props:{onResearched:t[3],info:t[11]}}),{c(){Q(e.$$.fragment)},m(n,l){Z(e,n,l),i=!0},p(n,l){const o={};l&1&&(o.info=n[11]),e.$set(o)},i(n){i||(z(e.$$.fragment,n),i=!0)},o(n){B(e.$$.fragment,n),i=!1},d(n){J(e,n)}}}function pt(t){let e,i,n=t[11].building===t[5].name&&ht(t);return{c(){n&&n.c(),e=Me()},m(l,o){n&&n.m(l,o),S(l,e,o),i=!0},p(l,o){l[11].building===l[5].name?n?(n.p(l,o),o&1&&z(n,1)):(n=ht(l),n.c(),z(n,1),n.m(e.parentNode,e)):n&&(oe(),B(n,1,1,()=>{n=null}),re())},i(l){i||(z(n),i=!0)},o(l){B(n),i=!1},d(l){n&&n.d(l),l&&R(e)}}}function mt(t){let e,i;return e=new Ke({props:{onResearched:t[3],info:t[8]}}),{c(){Q(e.$$.fragment)},m(n,l){Z(e,n,l),i=!0},p(n,l){const o={};l&2&&(o.info=n[8]),e.$set(o)},i(n){i||(z(e.$$.fragment,n),i=!0)},o(n){B(e.$$.fragment,n),i=!1},d(n){J(e,n)}}}function gt(t){let e=t[8].building.includes(t[5].name)&&t[8].type==="unique",i,n,l=e&&mt(t);return{c(){l&&l.c(),i=Me()},m(o,r){l&&l.m(o,r),S(o,i,r),n=!0},p(o,r){r&2&&(e=o[8].building.includes(o[5].name)&&o[8].type==="unique"),e?l?(l.p(o,r),r&2&&z(l,1)):(l=mt(o),l.c(),z(l,1),l.m(i.parentNode,i)):l&&(oe(),B(l,1,1,()=>{l=null}),re())},i(o){n||(z(l),n=!0)},o(o){B(l),n=!1},d(o){l&&l.d(o),o&&R(i)}}}function bt(t){let e,i,n,l=t[5].short+"",o,r,s,u,d,v,y=t[1],p=[];for(let c=0;c<y.length;c+=1)p[c]=_t(ft(t,y,c));const b=c=>B(p[c],1,1,()=>{p[c]=null});let h=t[0],q=[];for(let c=0;c<h.length;c+=1)q[c]=pt(ct(t,h,c));const E=c=>B(q[c],1,1,()=>{q[c]=null});let g=t[1],a=[];for(let c=0;c<g.length;c+=1)a[c]=gt(at(t,g,c));const K=c=>B(a[c],1,1,()=>{a[c]=null});return{c(){e=k("div"),i=k("div"),n=k("b"),o=U(l),r=M();for(let c=0;c<p.length;c+=1)p[c].c();s=M();for(let c=0;c<q.length;c+=1)q[c].c();u=M();for(let c=0;c<a.length;c+=1)a[c].c();d=M(),C(i,"class","building svelte-1o6bzc3"),C(e,"class","col svelte-1o6bzc3")},m(c,w){S(c,e,w),_(e,i),_(i,n),_(n,o),_(e,r);for(let m=0;m<p.length;m+=1)p[m].m(e,null);_(e,s);for(let m=0;m<q.length;m+=1)q[m].m(e,null);_(e,u);for(let m=0;m<a.length;m+=1)a[m].m(e,null);_(e,d),v=!0},p(c,w){if(w&14){y=c[1];let m;for(m=0;m<y.length;m+=1){const O=ft(c,y,m);p[m]?(p[m].p(O,w),z(p[m],1)):(p[m]=_t(O),p[m].c(),z(p[m],1),p[m].m(e,s))}for(oe(),m=y.length;m<p.length;m+=1)b(m);re()}if(w&13){h=c[0];let m;for(m=0;m<h.length;m+=1){const O=ct(c,h,m);q[m]?(q[m].p(O,w),z(q[m],1)):(q[m]=pt(O),q[m].c(),z(q[m],1),q[m].m(e,u))}for(oe(),m=h.length;m<q.length;m+=1)E(m);re()}if(w&14){g=c[1];let m;for(m=0;m<g.length;m+=1){const O=at(c,g,m);a[m]?(a[m].p(O,w),z(a[m],1)):(a[m]=gt(O),a[m].c(),z(a[m],1),a[m].m(e,d))}for(oe(),m=g.length;m<a.length;m+=1)K(m);re()}},i(c){if(!v){for(let w=0;w<y.length;w+=1)z(p[w]);for(let w=0;w<h.length;w+=1)z(q[w]);for(let w=0;w<g.length;w+=1)z(a[w]);v=!0}},o(c){p=p.filter(Boolean);for(let w=0;w<p.length;w+=1)B(p[w]);q=q.filter(Boolean);for(let w=0;w<q.length;w+=1)B(q[w]);a=a.filter(Boolean);for(let w=0;w<a.length;w+=1)B(a[w]);v=!1},d(c){c&&R(e),ue(p,c),ue(q,c),ue(a,c)}}}function Wt(t){let e,i,n=t[2],l=[];for(let r=0;r<n.length;r+=1)l[r]=bt(ut(t,n,r));const o=r=>B(l[r],1,1,()=>{l[r]=null});return{c(){e=k("div");for(let r=0;r<l.length;r+=1)l[r].c();C(e,"class","row svelte-1o6bzc3")},m(r,s){S(r,e,s);for(let u=0;u<l.length;u+=1)l[u].m(e,null);i=!0},p(r,[s]){if(s&15){n=r[2];let u;for(u=0;u<n.length;u+=1){const d=ut(r,n,u);l[u]?(l[u].p(d,s),z(l[u],1)):(l[u]=bt(d),l[u].c(),z(l[u],1),l[u].m(e,null))}for(oe(),u=n.length;u<l.length;u+=1)o(u);re()}},i(r){if(!i){for(let s=0;s<n.length;s+=1)z(l[s]);i=!0}},o(r){l=l.filter(Boolean);for(let s=0;s<l.length;s+=1)B(l[s]);i=!1},d(r){r&&R(e),ue(l,r)}}}function Vt(t,e,i){let{display_units:n,display_techs:l,researched:o}=e;const r=[{name:"eco",short:"eco"},{name:"blacksmith",short:"smith"},{name:"archery",short:"archery"},{name:"barracks",short:"barrak"},{name:"stable",short:"stable"},{name:"workshop",short:"seige"},{name:"castle",short:"castle"},{name:"university",short:"uni"},{name:"monastery",short:"monk"}],s=function(u){o(u)};return t.$$set=u=>{"display_units"in u&&i(0,n=u.display_units),"display_techs"in u&&i(1,l=u.display_techs),"researched"in u&&i(4,o=u.researched)},[n,l,r,s,o]}class Xt extends fe{constructor(e){super(),ce(this,e,Vt,Wt,ae,{display_units:0,display_techs:1,researched:4})}}const Zt=`<!DOCTYPE html>\r
<html>\r
<head>\r
  <meta charset="UTF-8">\r
  <title>Aoe2 Build Tracker</title>\r
  <style>\r
    .grid {\r
      display: grid;\r
      grid-template-columns: 3fr repeat(4, 1fr);\r
	  width:500px;\r
    }\r
    .grid div {\r
      padding: 5px;\r
	  border-top: 1px solid lightgrey;\r
	  border-right: 1px solid lightgrey;\r
      text-align: center;\r
    }\r
  </style>\r
</head>\r
<body>\r
  <div class="grid">\r
	<div>Desc</div>\r
    <div>wood</div>\r
    <div>food</div>\r
    <div>gold</div>\r
    <div>stone</div>`;function Jt(t){let e,i,n,l,o,r,s,u,d,v,y,p;return{c(){e=k("div"),i=k("div"),n=U(t[1]),l=M(),o=k("input"),r=M(),s=k("div"),u=k("button"),u.textContent="-",d=M(),v=k("button"),v.textContent="+",C(o,"type","number"),C(o,"class","svelte-oqf2v4"),C(i,"class","res svelte-oqf2v4"),C(u,"class","svelte-oqf2v4"),C(v,"class","svelte-oqf2v4"),C(s,"class","buttons svelte-oqf2v4"),C(e,"class","container svelte-oqf2v4")},m(b,h){S(b,e,h),_(e,i),_(i,n),_(i,l),_(i,o),Se(o,t[0]),_(e,r),_(e,s),_(s,u),_(s,d),_(s,v),y||(p=[G(o,"input",t[5]),G(u,"click",t[3]),G(v,"click",t[2])],y=!0)},p(b,[h]){h&2&&D(n,b[1]),h&1&&qt(o.value)!==b[0]&&Se(o,b[0])},i:X,o:X,d(b){b&&R(e),y=!1,x(p)}}}function Yt(t,e,i){let{value:n=0}=e,{label:l="none"}=e,{ResourceUpdate:o}=e;function r(){o(l,1)}function s(){o(l,-1)}function u(){n=qt(this.value),i(0,n)}return t.$$set=d=>{"value"in d&&i(0,n=d.value),"label"in d&&i(1,l=d.label),"ResourceUpdate"in d&&i(4,o=d.ResourceUpdate)},[n,l,r,s,o,u]}class Te extends fe{constructor(e){super(),ce(this,e,Yt,Jt,ae,{value:0,label:1,ResourceUpdate:4})}}function yt(t){let e,i,n;return{c(){e=k("button"),e.textContent=">",C(e,"class","transport-button svelte-bwl8iq")},m(l,o){S(l,e,o),i||(n=G(e,"click",t[12]),i=!0)},p:X,d(l){l&&R(e),i=!1,n()}}}function Qt(t){let e,i,n,l,o,r,s,u,d,v,y,p,b,h,q,E,g,a,K,c,w,m,O,ee,j,$,te,Y,W,L,F,N,H,T,I,me,ve,ge,ne,le,be,ke,f=t[7]==="playback"&&yt(t);O=new Ke({props:{onResearched:t[17],info:t[9]}});function P(A){t[20](A)}let ie={label:"wood",ResourceUpdate:t[15]};t[2]!==void 0&&(ie.value=t[2]),$=new Te({props:ie}),he.push(()=>Ce($,"value",P));function Tt(A){t[21](A)}let Oe={label:"food",ResourceUpdate:t[15]};t[3]!==void 0&&(Oe.value=t[3]),W=new Te({props:Oe}),he.push(()=>Ce(W,"value",Tt));function At(A){t[22](A)}let $e={label:"gold",ResourceUpdate:t[15]};t[4]!==void 0&&($e.value=t[4]),N=new Te({props:$e}),he.push(()=>Ce(N,"value",At));function Rt(A){t[23](A)}let He={label:"stone",ResourceUpdate:t[15]};return t[5]!==void 0&&(He.value=t[5]),I=new Te({props:He}),he.push(()=>Ce(I,"value",Rt)),ne=new Xt({props:{researched:t[17],display_units:t[0],display_techs:t[1]}}),{c(){e=k("main"),i=k("button"),i.textContent="Reset",n=M(),l=k("button"),l.textContent="Play",o=M(),r=k("button"),r.textContent="Record",s=M(),u=U(t[7]),d=M(),v=k("button"),v.textContent="Report",y=M(),p=k("article"),b=U(`Time\r
		`),h=k("input"),q=M(),f&&f.c(),E=M(),g=k("label"),a=U(t[8]),K=M(),c=k("article"),w=k("div"),m=U(`age\r
			`),Q(O.$$.fragment),ee=M(),j=k("div"),Q($.$$.fragment),Y=M(),Q(W.$$.fragment),F=M(),Q(N.$$.fragment),T=M(),Q(I.$$.fragment),ve=M(),ge=k("div"),Q(ne.$$.fragment),C(h,"class","gametime svelte-bwl8iq"),C(h,"type","text"),C(g,"class","svelte-bwl8iq"),Je(g,"fadeit",t[10]),C(p,"class","timer svelte-bwl8iq"),C(c,"class","svelte-bwl8iq"),C(j,"class","counter-container svelte-bwl8iq")},m(A,V){S(A,e,V),_(e,i),_(e,n),_(e,l),_(e,o),_(e,r),_(e,s),_(e,u),_(e,d),_(e,v),_(e,y),_(e,p),_(p,b),_(p,h),Se(h,t[6]),_(p,q),f&&f.m(p,null),_(p,E),_(p,g),_(g,a),_(e,K),_(e,c),_(c,w),_(w,m),Z(O,w,null),_(e,ee),_(e,j),Z($,j,null),_(j,Y),Z(W,j,null),_(j,F),Z(N,j,null),_(j,T),Z(I,j,null),_(e,ve),_(e,ge),Z(ne,ge,null),le=!0,be||(ke=[G(window,"keydown",t[16]),G(i,"click",t[11]),G(l,"click",t[13]),G(r,"click",t[14]),G(v,"click",t[18]),G(h,"input",t[19])],be=!0)},p(A,V){(!le||V[0]&128)&&D(u,A[7]),V[0]&64&&h.value!==A[6]&&Se(h,A[6]),A[7]==="playback"?f?f.p(A,V):(f=yt(A),f.c(),f.m(p,E)):f&&(f.d(1),f=null),(!le||V[0]&256)&&D(a,A[8]),(!le||V[0]&1024)&&Je(g,"fadeit",A[10]);const je={};V[0]&512&&(je.info=A[9]),O.$set(je);const De={};!te&&V[0]&4&&(te=!0,De.value=A[2],qe(()=>te=!1)),$.$set(De);const Ge={};!L&&V[0]&8&&(L=!0,Ge.value=A[3],qe(()=>L=!1)),W.$set(Ge);const We={};!H&&V[0]&16&&(H=!0,We.value=A[4],qe(()=>H=!1)),N.$set(We);const Ve={};!me&&V[0]&32&&(me=!0,Ve.value=A[5],qe(()=>me=!1)),I.$set(Ve);const Ee={};V[0]&1&&(Ee.display_units=A[0]),V[0]&2&&(Ee.display_techs=A[1]),ne.$set(Ee)},i(A){le||(z(O.$$.fragment,A),z($.$$.fragment,A),z(W.$$.fragment,A),z(N.$$.fragment,A),z(I.$$.fragment,A),z(ne.$$.fragment,A),le=!0)},o(A){B(O.$$.fragment,A),B($.$$.fragment,A),B(W.$$.fragment,A),B(N.$$.fragment,A),B(I.$$.fragment,A),B(ne.$$.fragment,A),le=!1},d(A){A&&R(e),f&&f.d(),J(O),J($),J(W),J(N),J(I),J(ne),be=!1,x(ke)}}}let Ue=588;function Fe(t){let e,i,n;return e=Math.floor(t/1e3/60/60),i=Math.floor((t/1e3/60/60-e)*60),n=Math.floor(((t/1e3/60/60-e)*60-i)*60),n<10?n=`0${n}`:n=`${n}`,i<10?i=`0${i}`:i=`${i}`,`${e}:${i}:${n}`}function xt(t,e){let i=null;switch(t){case"wood":i=e>0?"KeyA":"KeyZ";break;case"food":i=e>0?"KeyS":"KeyX";break;case"gold":i=e>0?"KeyD":"KeyC";break;case"stone":i=e>0?"KeyF":"KeyV";break}return i}function ei(t){const e=new Blob([t],{type:"text/plain"}),i=URL.createObjectURL(e),n=document.createElement("a");n.href=i,n.download="report.html",n.click(),URL.revokeObjectURL(i)}function ti(t,e,i){let{display_units:n,display_techs:l}=e,o=0,r=0,s=0,u=0,d,v,y="0:00:00",p="stopped",b=[],h=0,q=0,E="",g={info_type:"age",researched:0,available:3,info_list:[{type:"ages",name:"Feudal Age",id:"feudal_age_de",Cost:{Food:500},ResearchTime:130},{type:"ages",name:"Castle Age",id:"castle_age_de",Cost:{Food:800,Gold:200},ResearchTime:160},{type:"ages",name:"Imperial Age",id:"imperial_age_de",Cost:{Food:1e3,Gold:800},ResearchTime:190}]},a=!1;K();function K(){i(8,E=""),d=Date.now(),v=0,i(2,o=i(3,r=i(4,s=i(5,u=0)))),i(9,g.researched=0,g),clearTimeout(g.timeout),i(9,g.timeout=0,g),n.forEach(f=>f.researched=0),l.forEach(f=>f.researched=0),h=0,clearTimeout(g.research_timeout),clearTimeout(g.text_timeout),i(9,g.research_timeout=0,g),i(9,g.text_timeout=0,g),n.forEach(f=>{f.research_timeout&&clearTimeout(f.research_timeout),f.research_timeout=0,f.text_timeout&&clearTimeout(f.text_timeout),f.text_timeout=0}),l.forEach(f=>{f.research_timeout&&clearTimeout(f.research_timeout),f.research_timeout=0,f.text_timeout&&clearTimeout(f.text_timeout),f.text_timeout=0}),q&&clearInterval(q),q=0,i(9,g),i(0,n),i(1,l)}function c(){i(7,p="playback"),K(),q=setInterval(j,Ue)}function w(){i(7,p="record"),K(),b=[],q=setInterval(te,Ue)}function m(){return v=(Date.now()-d)*1.7,v}function O(){p==="playback"?v+=Ue:v=m(),i(6,y=Fe(v))}function ee(f){f.text_timeout=0,i(10,a=!0)}function j(){if(O(),h<b.length)for(;h<b.length&&v>b[h].t;){if(b[h].type==="key")L(b[h].code,b[h].count);else{clearTimeout(f.text_timeout);const f=b[h].code;i(10,a=!1),i(8,E=f.info_list[f.researched].name),f.text_timeout=setTimeout(ee,2e3,f);const P=f.info_list[f.researched].ResearchTime*1e3;f.research_timeout=setTimeout(T,P,f),f.researched<f.available-1&&f.researched++,i(9,g),i(0,n),i(1,l)}h++}else clearInterval(q),q=0}function $(){v=b[h].t}function te(){O()}function Y(){c()}function W(){w()}function L(f,P){switch(f){case"KeyA":case"KeyZ":i(2,o+=P);break;case"KeyS":case"KeyX":i(3,r+=P);break;case"KeyD":case"KeyC":i(4,s+=P);break;case"KeyF":case"KeyV":i(5,u+=P);break}o<0&&i(2,o=0),r<0&&i(3,r=0),s<0&&i(4,s=0),u<0&&i(5,u=0)}function F(f,P){const ie=m();b.length>0&&ie-b[b.length-1].last_update<5e3&&b[b.length-1].code===f?(b[b.length-1].count+=P,b[b.length-1].last_update=ie):b.push({t:ie,type:"key",code:f,count:P,last_update:ie})}function N(f,P){if(p==="playback")return;const ie=xt(f,P);F(ie,P),L(ie,P)}function H(f){if(p==="playback")return;let P=-1;["KeyA","KeyS","KeyD","KeyF"].includes(f.code)&&(P=1),F(f.code,P),L(f.code,P)}function T(f){f.research_timeout=0,i(10,a=!1),clearTimeout(f.text_timeout),i(8,E=f.info_list[f.researched-1].name+" finished"),f.text_timeout=setTimeout(ee,2e3,f)}function I(f){if(p==="playback")return;clearTimeout(f.research_timeout),clearTimeout(f.text_timeout),f.text_timeout=0;const P=f.info_list[f.researched].ResearchTime*1e3;f.research_timeout=setTimeout(T,P,f),f.researched<f.available-1&&f.researched++,i(9,g),i(0,n),i(1,l),b.push({t:v,type:"research",code:f})}function me(){let f=Zt;return b.forEach(P=>{P.type==="key"?(L(P.code,P.count),f+=`<div>${Fe(P.t)}</div><div>${o}</div> <div>${r}</div> <div>${s}</div> <div>${u}</div>
`):P.type==="research"&&(f+=`<div>${Fe(P.t)}-${P.code.info_list[P.code.researched++].name}</div><div></div><div></div><div></div><div></div>
`)}),f+=`</div>
</body>
</html>
`,f}function ve(){K();const f=me();ei(f)}function ge(){y=this.value,i(6,y)}function ne(f){o=f,i(2,o)}function le(f){r=f,i(3,r)}function be(f){s=f,i(4,s)}function ke(f){u=f,i(5,u)}return t.$$set=f=>{"display_units"in f&&i(0,n=f.display_units),"display_techs"in f&&i(1,l=f.display_techs)},[n,l,o,r,s,u,y,p,E,g,a,K,$,Y,W,N,H,I,ve,ge,ne,le,be,ke]}class ii extends fe{constructor(e){super(),ce(this,e,ti,Qt,ae,{display_units:0,display_techs:1},null,[-1,-1])}}function vt(t,e,i){const n=t.slice();return n[6]=e[i],n}function kt(t){let e,i=t[6]+"",n,l,o;return{c(){e=k("option"),n=U(i),l=M(),e.__value=o=t[6],e.value=e.__value},m(r,s){S(r,e,s),_(e,n),_(e,l)},p(r,s){s&1&&i!==(i=r[6]+"")&&D(n,i),s&1&&o!==(o=r[6])&&(e.__value=o,e.value=e.__value)},d(r){r&&R(e)}}}function ni(t){let e,i,n,l,o=t[0],r=[];for(let s=0;s<o.length;s+=1)r[s]=kt(vt(t,o,s));return{c(){e=k("div"),i=k("select");for(let s=0;s<r.length;s+=1)r[s].c();t[1]===void 0&&ze(()=>t[4].call(i)),C(e,"class","civcount svelte-1w8wol8")},m(s,u){S(s,e,u),_(e,i);for(let d=0;d<r.length;d+=1)r[d].m(i,null);Ze(i,t[1]),n||(l=[G(i,"change",t[4]),G(i,"change",t[2]),zt(li.call(null,i))],n=!0)},p(s,[u]){if(u&1){o=s[0];let d;for(d=0;d<o.length;d+=1){const v=vt(s,o,d);r[d]?r[d].p(v,u):(r[d]=kt(v),r[d].c(),r[d].m(i,null))}for(;d<r.length;d+=1)r[d].d(1);r.length=o.length}u&3&&Ze(i,s[1])},i:X,o:X,d(s){s&&R(e),ue(r,s),n=!1,x(l)}}}function li(t){t.focus()}function oi(t,e,i){let{changeCiv:n,civnames:l}=e,o="Armenians";const r=()=>{n(o)};function s(){o=Kt(this),i(1,o),i(0,l)}return t.$$set=u=>{"changeCiv"in u&&i(3,n=u.changeCiv),"civnames"in u&&i(0,l=u.civnames)},[l,o,r,n,s]}class ri extends fe{constructor(e){super(),ce(this,e,oi,ni,ae,{changeCiv:3,civnames:0})}}function si(t){let e;return{c(){e=k("p"),e.textContent="Loading...",C(e,"class","svelte-17eambd")},m(i,n){S(i,e,n)},p:X,i:X,o:X,d(i){i&&R(e)}}}function ui(t){let e,i,n,l,o,r,s;return n=new ri({props:{changeCiv:t[4],civnames:t[3]}}),r=new ii({props:{display_units:t[1],display_techs:t[2]}}),{c(){e=k("main"),i=k("div"),Q(n.$$.fragment),l=M(),o=k("div"),Q(r.$$.fragment),C(e,"class","svelte-17eambd")},m(u,d){S(u,e,d),_(e,i),Z(n,i,null),_(e,l),_(e,o),Z(r,o,null),s=!0},p(u,d){const v={};d&8&&(v.civnames=u[3]),n.$set(v);const y={};d&2&&(y.display_units=u[1]),d&4&&(y.display_techs=u[2]),r.$set(y)},i(u){s||(z(n.$$.fragment,u),z(r.$$.fragment,u),s=!0)},o(u){B(n.$$.fragment,u),B(r.$$.fragment,u),s=!1},d(u){u&&R(e),J(n),J(r)}}}function ai(t){let e,i,n,l;const o=[ui,si],r=[];function s(u,d){return u[0]?0:1}return e=s(t),i=r[e]=o[e](t),{c(){i.c(),n=Me()},m(u,d){r[e].m(u,d),S(u,n,d),l=!0},p(u,[d]){let v=e;e=s(u),e===v?r[e].p(u,d):(oe(),B(r[v],1,1,()=>{r[v]=null}),re(),i=r[e],i?i.p(u,d):(i=r[e]=o[e](u),i.c()),z(i,1),i.m(n.parentNode,n))},i(u){l||(z(i),l=!0)},o(u){B(i),l=!1},d(u){r[e].d(u),u&&R(n)}}}function ci(t,e,i){let n=!1,l=null,o=null,r,s,u,d;function v(){i(3,d=Object.keys(l.civ_names))}function y(h){const q=l.civ_helptexts[h],E=o[q],g=Pt.slice(),a=l.techtrees[h].units,K=g.filter(L=>a.map(F=>F.id).includes(L.id)),c=Bt.slice(),w=l.techtrees[h].techs,m=c.filter(L=>w.map(F=>F.id).includes(L.id)),O=K.map(L=>({...L,...l.data.units[L.id],name:o[l.data.units[L.id].LanguageNameId]})),ee=m.map(L=>({...L,...l.data.techs[L.id],name:o[l.data.techs[L.id].LanguageNameId]})),j=l.techtrees[h].unique,$=l.data.units[j.castleAgeUniqueUnit],te=o[$.LanguageNameId],Y=l.data.units[j.imperialAgeUniqueUnit],W=o[Y.LanguageNameId];return u={castle:{info:{info_index:0,info_type:"unit",info_list:[{...$,name:te}]}},imperial:{info:{info_index:0,info_type:"unit",info_list:[{...Y,name:W}]}}},i(1,r=O.reduce((L,F)=>{if(L.length===0)return[{...F,available:1,researched:0,info_type:"unit",next:!0,info_list:[F]}];const N=L[L.length-1];return N.type===F.type?(N.available+=1,N.info_list=N.info_list.concat(F),L):[...L,{...F,available:1,researched:0,info_type:"unit",info_list:[F],next:N.building!==F.building}]},[])),i(2,s=ee.reduce((L,F)=>{if(L.length===0)return[{...F,available:1,researched:0,info_type:"tech",info_list:[F]}];const N=L[L.length-1];return N.building===F.building&&N.type!=="unique"&&N.type===F.type?(N.available+=1,N.info_list=N.info_list.concat(F),L):[...L,{...F,available:1,researched:0,info_type:"tech",info_list:[F]}]},[])),{civdesc:E,display_units:r,display_techs:s,display_unique:u}}const p=fetch("https://raw.githubusercontent.com/SiegeEngineers/aoe2techtree/master/data/locales/en/strings.json").then(h=>h.json()).then(h=>{o=h}).catch(h=>console.error("Error fetching strings:",h)),b=fetch("https://raw.githubusercontent.com/SiegeEngineers/aoe2techtree/master/data/data.json").then(h=>h.json()).then(h=>{l=h,v(),y("Armenians")}).catch(h=>console.error("Error fetching JSON:",h));return Promise.all([p,b]).then(()=>{i(0,n=!0)}),[n,r,s,d,y]}class fi extends fe{constructor(e){super(),ce(this,e,ci,ai,ae,{})}}new fi({target:document.getElementById("app")});
