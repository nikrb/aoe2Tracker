(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))n(l);new MutationObserver(l=>{for(const r of l)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function i(l){const r={};return l.integrity&&(r.integrity=l.integrity),l.referrerPolicy&&(r.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?r.credentials="include":l.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(l){if(l.ep)return;l.ep=!0;const r=i(l);fetch(l.href,r)}})();function X(){}function wt(t){return t()}function Xe(){return Object.create(null)}function x(t){t.forEach(wt)}function Oe(t){return typeof t=="function"}function ae(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let qe;function me(t,e){return qe||(qe=document.createElement("a")),qe.href=e,t===qe.href}function St(t){return Object.keys(t).length===0}function zt(t){return t&&Oe(t.destroy)?t.destroy:X}function h(t,e){t.appendChild(e)}function S(t,e,i){t.insertBefore(e,i||null)}function R(t){t.parentNode&&t.parentNode.removeChild(t)}function ue(t,e){for(let i=0;i<t.length;i+=1)t[i]&&t[i].d(e)}function k(t){return document.createElement(t)}function U(t){return document.createTextNode(t)}function M(){return U(" ")}function Me(){return U("")}function G(t,e,i,n){return t.addEventListener(e,i,n),()=>t.removeEventListener(e,i,n)}function C(t,e,i){i==null?t.removeAttribute(e):t.getAttribute(e)!==i&&t.setAttribute(e,i)}function qt(t){return t===""?null:+t}function Mt(t){return Array.from(t.childNodes)}function D(t,e){e=""+e,t.data!==e&&(t.data=e)}function Se(t,e){t.value=e??""}function Ze(t,e,i){for(let n=0;n<t.options.length;n+=1){const l=t.options[n];if(l.__value===e){l.selected=!0;return}}(!i||e!==void 0)&&(t.selectedIndex=-1)}function Et(t){const e=t.querySelector(":checked");return e&&e.__value}function Je(t,e,i){t.classList[i?"add":"remove"](e)}let Ie;function ve(t){Ie=t}const _e=[],he=[];let pe=[];const Pe=[],Kt=Promise.resolve();let Be=!1;function Lt(){Be||(Be=!0,Kt.then(Ct))}function ze(t){pe.push(t)}function Ce(t){Pe.push(t)}const Le=new Set;let de=0;function Ct(){if(de!==0)return;const t=Ie;do{try{for(;de<_e.length;){const e=_e[de];de++,ve(e),Ut(e.$$)}}catch(e){throw _e.length=0,de=0,e}for(ve(null),_e.length=0,de=0;he.length;)he.pop()();for(let e=0;e<pe.length;e+=1){const i=pe[e];Le.has(i)||(Le.add(i),i())}pe.length=0}while(_e.length);for(;Pe.length;)Pe.pop()();Be=!1,Le.clear(),ve(t)}function Ut(t){if(t.fragment!==null){t.update(),x(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(ze)}}function Ft(t){const e=[],i=[];pe.forEach(n=>t.indexOf(n)===-1?e.push(n):i.push(n)),i.forEach(n=>n()),pe=e}const Re=new Set;let se;function re(){se={r:0,c:[],p:se}}function oe(){se.r||x(se.c),se=se.p}function z(t,e){t&&t.i&&(Re.delete(t),t.i(e))}function B(t,e,i,n){if(t&&t.o){if(Re.has(t))return;Re.add(t),se.c.push(()=>{Re.delete(t),n&&(i&&t.d(1),n())}),t.o(e)}else n&&n()}function Te(t,e,i){const n=t.$$.props[e];n!==void 0&&(t.$$.bound[n]=i,i(t.$$.ctx[n]))}function Q(t){t&&t.c()}function Z(t,e,i,n){const{fragment:l,after_update:r}=t.$$;l&&l.m(e,i),n||ze(()=>{const o=t.$$.on_mount.map(wt).filter(Oe);t.$$.on_destroy?t.$$.on_destroy.push(...o):x(o),t.$$.on_mount=[]}),r.forEach(ze)}function J(t,e){const i=t.$$;i.fragment!==null&&(Ft(i.after_update),x(i.on_destroy),i.fragment&&i.fragment.d(e),i.on_destroy=i.fragment=null,i.ctx=[])}function Pt(t,e){t.$$.dirty[0]===-1&&(_e.push(t),Lt(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function ce(t,e,i,n,l,r,o,s=[-1]){const u=Ie;ve(t);const d=t.$$={fragment:null,ctx:[],props:r,update:X,not_equal:l,bound:Xe(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(u?u.$$.context:[])),callbacks:Xe(),dirty:s,skip_bound:!1,root:e.target||u.$$.root};o&&o(d.root);let v=!1;if(d.ctx=i?i(t,e.props||{},(y,p,...b)=>{const _=b.length?b[0]:p;return d.ctx&&l(d.ctx[y],d.ctx[y]=_)&&(!d.skip_bound&&d.bound[y]&&d.bound[y](_),v&&Pt(t,y)),p}):[],d.update(),v=!0,x(d.before_update),d.fragment=n?n(d.ctx):!1,e.target){if(e.hydrate){const y=Mt(e.target);d.fragment&&d.fragment.l(y),y.forEach(R)}else d.fragment&&d.fragment.c();e.intro&&z(t.$$.fragment),Z(t,e.target,e.anchor,e.customElement),Ct()}ve(u)}class fe{$destroy(){J(this,1),this.$destroy=X}$on(e,i){if(!Oe(i))return X;const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(i),()=>{const l=n.indexOf(i);l!==-1&&n.splice(l,1)}}$set(e){this.$$set&&!St(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Bt=[{id:4,type:"archer",building:"archery"},{id:24,type:"archer",building:"archery"},{id:492,type:"archer",building:"archery"},{id:185,type:"slinger",building:"archery"},{id:7,type:"skirm",building:"archery"},{id:6,type:"skirm",building:"archery"},{id:1155,type:"skirm",building:"archery"},{id:1010,type:"genitour",building:"archery"},{id:1012,type:"genitour",building:"archery"},{id:5,type:"cannoneer",building:"archery"},{id:39,type:"cavarcher",building:"archery"},{id:474,type:"cavarcher",building:"archery"},{id:873,type:"elephantarcher",building:"archery"},{id:875,type:"elephantarcher",building:"archery"},{id:74,type:"swordsman",building:"barracks"},{id:75,type:"swordsman",building:"barracks"},{id:77,type:"swordsman",building:"barracks"},{id:473,type:"swordsman",building:"barracks"},{id:567,type:"swordsman",building:"barracks"},{id:93,type:"pikeman",building:"barracks"},{id:358,type:"pikeman",building:"barracks"},{id:359,type:"pikeman",building:"barracks"},{id:751,type:"eagle",building:"barracks"},{id:753,type:"eagle",building:"barracks"},{id:752,type:"eagle",building:"barracks"},{id:882,type:"condottiero",building:"barracks"},{id:448,type:"cav",building:"stable"},{id:546,type:"cav",building:"stable"},{id:441,type:"cav",building:"stable"},{id:1707,type:"cav",building:"stable"},{id:1751,type:"shrivamsha",building:"stable"},{id:1753,type:"shrivamsha",building:"stable"},{id:38,type:"knight",building:"stable"},{id:283,type:"knight",building:"stable"},{id:569,type:"knight",building:"stable"},{id:1370,type:"lancer",building:"stable"},{id:1372,type:"lancer",building:"stable"},{id:1755,type:"cavcamel",building:"stable"},{id:329,type:"cavcamel",building:"stable"},{id:330,type:"cavcamel",building:"stable"},{id:5419,type:"cavcamel",building:"stable"},{id:1132,type:"elephant",building:"stable"},{id:1134,type:"elephant",building:"stable"},{id:1570,type:"xolotl",building:"stable"},{id:1258,type:"ram",building:"workshop"},{id:422,type:"ram",building:"workshop"},{id:548,type:"ram",building:"workshop"},{id:279,type:"Scorpion",building:"workshop"},{id:542,type:"Scorpion",building:"workshop"},{id:280,type:"Mangonel",building:"workshop"},{id:550,type:"Mangonel",building:"workshop"},{id:588,type:"Mangonel",building:"workshop"},{id:36,type:"bbc",building:"workshop"},{id:1709,type:"bbc",building:"workshop"},{id:1105,type:"siege tower",building:"workshop"},{id:1744,type:"elephant seige",building:"workshop"},{id:1746,type:"elephant seige",building:"workshop"}],Ot=[{id:22,tech:"Loom",type:"unique",building:"eco"},{id:8,tech:"Town Watch",type:"los",building:"eco"},{id:280,tech:"Town Patrol",type:"los",building:"eco"},{id:213,tech:"Wheel Barrow",type:"vil speed",building:"eco"},{id:249,tech:"Hand Cart",type:"vil speed",building:"eco"},{id:199,tech:"Fletching",type:"attack",building:"blacksmith"},{id:200,tech:"Bodkin Arrow",type:"attack",building:"blacksmith"},{id:201,tech:"Bracer",type:"attack",building:"blacksmith"},{id:211,tech:"Padded Archer Armor",type:"armour",building:"blacksmith"},{id:212,tech:"Leather Archer Armor",type:"armour",building:"blacksmith"},{id:219,tech:"Ring Archer Armor",type:"armour",building:"blacksmith"},{id:67,tech:"Forging",type:"attack",building:"blacksmith"},{id:68,tech:"Iron casting",type:"attack",building:"blacksmith"},{id:75,tech:"Blast Furnace",type:"attack",building:"blacksmith"},{id:81,tech:"Scale Barding Armor",type:"armour",building:"blacksmith"},{id:82,tech:"Chain Barding Armor",type:"armour",building:"blacksmith"},{id:80,tech:"Plate Barding Armor",type:"armour",building:"blacksmith"},{id:74,tech:"Scale Mail Armor",type:"armour",building:"blacksmith"},{id:76,tech:"Chain Mail Armor",type:"armour",building:"blacksmith"},{id:77,tech:"Plate Mail Armor",type:"armour",building:"blacksmith"},{id:437,tech:"Thumb Ring",type:"unique",building:"archery"},{id:436,tech:"Parthian Tactics",type:"unique",building:"archery"},{id:716,tech:"Supplies",type:"unique",building:"barracks"},{id:215,tech:"Squires",type:"unique",building:"barracks"},{id:602,tech:"Arson",type:"unique",building:"barracks"},{id:435,tech:"Bloodlines",type:"unique",building:"stable"},{id:39,tech:"Husbandry",type:"unique",building:"stable"},{id:321,tech:"Sappers",type:"unique",building:"castle"},{id:315,tech:"Conscription",type:"unique",building:"castle"},{id:379,tech:"Hoardings",type:"unique",building:"castle"},{id:408,tech:"Spies",type:"unique",building:"castle"},{id:50,tech:"Masonry",type:"building hp",building:"university"},{id:51,tech:"Architecture",type:"building hp",building:"university"},{id:93,tech:"Ballistics",type:"unique",building:"university"},{id:47,tech:"Chemistry",type:"unique",building:"university"},{id:140,tech:"Guard Tower",type:"tower",building:"university"},{id:63,tech:"Keep",type:"tower",building:"university"},{id:64,tech:"Bombard Tower",type:"unique",building:"university"},{id:322,tech:"Murder Holes",type:"unique",building:"university"},{id:377,tech:"Siege Engineers",type:"unique",building:"university"},{id:380,tech:"Heated Shot",type:"unique",building:"university"},{id:608,tech:"Arrowslits",type:"unique",building:"university"},{id:194,tech:"Fortified Wall",type:"unique",building:"university"},{id:231,tech:"Sanctity",type:"unique",building:"monastery"},{id:252,tech:"Fervor",type:"unique",building:"monastery"},{id:316,tech:"Redemption",type:"unique",building:"monastery"},{id:319,tech:"Atonement",type:"unique",building:"monastery"},{id:439,tech:"Heresy",type:"unique",building:"monastery"},{id:441,tech:"Herbal Medicine",type:"unique",building:"monastery"},{id:45,tech:"Faith",type:"unique",building:"monastery"},{id:230,tech:"Block Printing",type:"unique",building:"monastery"},{id:233,tech:"Illumination",type:"unique",building:"monastery"},{id:438,tech:"Theocracy",type:"unique",building:"monastery"},{id:55,tech:"Gold Mining",type:"gold",building:"eco"},{id:182,tech:"Gold Shaft Mining",type:"gold",building:"eco"},{id:278,tech:"Stone Mining",type:"stone",building:"eco"},{id:279,tech:"Stone Shaft Mining",type:"stone",building:"eco"},{id:202,tech:"Double Bit Axe",type:"wood",building:"eco"},{id:203,tech:"Bow Saw",type:"wood",building:"eco"},{id:221,tech:"Two Man Saw",type:"wood",building:"eco"},{id:14,tech:"Horse collar",type:"food",building:"eco"},{id:13,tech:"Heavy plow",type:"food",building:"eco"},{id:12,tech:"Crop rotation",type:"food",building:"eco"}];function Ye(t){let e,i,n,l,r=t[0].info_list[t[1]].Cost.Wood+"",o;return{c(){e=k("img"),n=M(),l=k("span"),o=U(r),me(e.src,i="https://aoe2techtree.net/img/wood.png")||C(e,"src",i),C(e,"class","svelte-dkpzzt"),C(l,"class","cost svelte-dkpzzt")},m(s,u){S(s,e,u),S(s,n,u),S(s,l,u),h(l,o)},p(s,u){u&3&&r!==(r=s[0].info_list[s[1]].Cost.Wood+"")&&D(o,r)},d(s){s&&R(e),s&&R(n),s&&R(l)}}}function Qe(t){let e,i,n,l,r=t[0].info_list[t[1]].Cost.Food+"",o;return{c(){e=k("img"),n=M(),l=k("span"),o=U(r),me(e.src,i="https://aoe2techtree.net/img/food.png")||C(e,"src",i),C(e,"class","svelte-dkpzzt"),C(l,"class","cost svelte-dkpzzt")},m(s,u){S(s,e,u),S(s,n,u),S(s,l,u),h(l,o)},p(s,u){u&3&&r!==(r=s[0].info_list[s[1]].Cost.Food+"")&&D(o,r)},d(s){s&&R(e),s&&R(n),s&&R(l)}}}function xe(t){let e,i,n,l,r=t[0].info_list[t[1]].Cost.Gold+"",o;return{c(){e=k("img"),n=M(),l=k("span"),o=U(r),me(e.src,i="https://aoe2techtree.net/img/gold.png")||C(e,"src",i),C(e,"class","svelte-dkpzzt"),C(l,"class","cost svelte-dkpzzt")},m(s,u){S(s,e,u),S(s,n,u),S(s,l,u),h(l,o)},p(s,u){u&3&&r!==(r=s[0].info_list[s[1]].Cost.Gold+"")&&D(o,r)},d(s){s&&R(e),s&&R(n),s&&R(l)}}}function et(t){let e,i,n,l,r=t[0].info_list[t[1]].Cost.stone+"",o;return{c(){e=k("img"),n=M(),l=k("span"),o=U(r),me(e.src,i="https://aoe2techtree.net/img/stone.png")||C(e,"src",i),C(e,"class","svelte-dkpzzt"),C(l,"class","cost svelte-dkpzzt")},m(s,u){S(s,e,u),S(s,n,u),S(s,l,u),h(l,o)},p(s,u){u&3&&r!==(r=s[0].info_list[s[1]].Cost.stone+"")&&D(o,r)},d(s){s&&R(e),s&&R(n),s&&R(l)}}}function It(t){let e,i,n=t[0].info_list[t[1]].ResearchTime+"",l;return{c(){e=k("div"),i=U("Research: "),l=U(n)},m(r,o){S(r,e,o),h(e,i),h(e,l)},p(r,o){o&3&&n!==(n=r[0].info_list[r[1]].ResearchTime+"")&&D(l,n)},d(r){r&&R(e)}}}function Nt(t){let e,i,n=t[0].info_list[t[1]].HP+"",l,r,o=t[0].info_list[t[1]].TrainTime+"",s,u,d,v,y=t[0].info_list[t[1]].Attack+"",p,b,_=t[0].info_list[t[1]].MeleeArmor+"",q,E,g=t[0].info_list[t[1]].PierceArmor+"",a,K,c,w,m=t[0].info_list[t[1]].Range+"",N,ee,j,$,te,Y=t[0].info_list[t[1]].Speed+"",W,L,F=t[0].info_list[t[1]].LineOfSight+"",I,H=t[0].info_list[t[1]].MinRange!==0&&tt(t);return{c(){e=k("div"),i=U("HP: "),l=U(n),r=U(`\r
        Train: `),s=U(o),u=M(),d=k("div"),v=U("Atck: "),p=U(y),b=U(`\r
        Armr: `),q=U(_),E=U(`/\r
                `),a=U(g),K=M(),c=k("div"),w=U("Range: "),N=U(m),ee=M(),H&&H.c(),j=M(),$=k("div"),te=U("Spd: "),W=U(Y),L=U(`\r
        LOS: `),I=U(F)},m(T,O){S(T,e,O),h(e,i),h(e,l),h(e,r),h(e,s),S(T,u,O),S(T,d,O),h(d,v),h(d,p),h(d,b),h(d,q),h(d,E),h(d,a),S(T,K,O),S(T,c,O),h(c,w),h(c,N),h(c,ee),H&&H.m(c,null),S(T,j,O),S(T,$,O),h($,te),h($,W),h($,L),h($,I)},p(T,O){O&3&&n!==(n=T[0].info_list[T[1]].HP+"")&&D(l,n),O&3&&o!==(o=T[0].info_list[T[1]].TrainTime+"")&&D(s,o),O&3&&y!==(y=T[0].info_list[T[1]].Attack+"")&&D(p,y),O&3&&_!==(_=T[0].info_list[T[1]].MeleeArmor+"")&&D(q,_),O&3&&g!==(g=T[0].info_list[T[1]].PierceArmor+"")&&D(a,g),O&3&&m!==(m=T[0].info_list[T[1]].Range+"")&&D(N,m),T[0].info_list[T[1]].MinRange!==0?H?H.p(T,O):(H=tt(T),H.c(),H.m(c,null)):H&&(H.d(1),H=null),O&3&&Y!==(Y=T[0].info_list[T[1]].Speed+"")&&D(W,Y),O&3&&F!==(F=T[0].info_list[T[1]].LineOfSight+"")&&D(I,F)},d(T){T&&R(e),T&&R(u),T&&R(d),T&&R(K),T&&R(c),H&&H.d(),T&&R(j),T&&R($)}}}function tt(t){let e,i=t[0].info_list[t[1]].MinRange+"",n;return{c(){e=U("(min): "),n=U(i)},m(l,r){S(l,e,r),S(l,n,r)},p(l,r){r&3&&i!==(i=l[0].info_list[l[1]].MinRange+"")&&D(n,i)},d(l){l&&R(e),l&&R(n)}}}function $t(t){let e,i,n=t[0].info_list[t[1]].name+"",l,r,o,s,u,d,v,y=typeof t[0].info_list[t[1]].Cost.Wood<"u"&&Ye(t),p=typeof t[0].info_list[t[1]].Cost.Food<"u"&&Qe(t),b=typeof t[0].info_list[t[1]].Cost.Gold<"u"&&xe(t),_=typeof t[0].info_list[t[1]].Cost.stone<"u"&&et(t);function q(a,K){return a[0].info_type==="unit"?Nt:It}let E=q(t),g=E(t);return{c(){e=k("div"),i=k("div"),l=U(n),r=M(),o=k("div"),y&&y.c(),s=M(),p&&p.c(),u=M(),b&&b.c(),d=M(),_&&_.c(),v=M(),g.c(),C(o,"class","cost-outer svelte-dkpzzt"),C(e,"class","outer svelte-dkpzzt")},m(a,K){S(a,e,K),h(e,i),h(i,l),h(e,r),h(e,o),y&&y.m(o,null),h(o,s),p&&p.m(o,null),h(o,u),b&&b.m(o,null),h(o,d),_&&_.m(o,null),h(e,v),g.m(e,null)},p(a,[K]){K&3&&n!==(n=a[0].info_list[a[1]].name+"")&&D(l,n),typeof a[0].info_list[a[1]].Cost.Wood<"u"?y?y.p(a,K):(y=Ye(a),y.c(),y.m(o,s)):y&&(y.d(1),y=null),typeof a[0].info_list[a[1]].Cost.Food<"u"?p?p.p(a,K):(p=Qe(a),p.c(),p.m(o,u)):p&&(p.d(1),p=null),typeof a[0].info_list[a[1]].Cost.Gold<"u"?b?b.p(a,K):(b=xe(a),b.c(),b.m(o,d)):b&&(b.d(1),b=null),typeof a[0].info_list[a[1]].Cost.stone<"u"?_?_.p(a,K):(_=et(a),_.c(),_.m(o,null)):_&&(_.d(1),_=null),E===(E=q(a))&&g?g.p(a,K):(g.d(1),g=E(a),g&&(g.c(),g.m(e,null)))},i:X,o:X,d(a){a&&R(e),y&&y.d(),p&&p.d(),b&&b.d(),_&&_.d(),g.d()}}}function Ht(t,e,i){let{info:n,info_index:l}=e;return t.$$set=r=>{"info"in r&&i(0,n=r.info),"info_index"in r&&i(1,l=r.info_index)},[n,l]}class jt extends fe{constructor(e){super(),ce(this,e,Ht,$t,ae,{info:0,info_index:1})}}function it(t,e,i){const n=t.slice();return n[9]=e[i],n[11]=i,n}function nt(t,e,i){const n=t.slice();return n[9]=e[i],n[11]=i,n}function lt(t){let e,i,n;function l(){return t[7](t[11])}return{c(){e=k("div"),C(e,"class","dotred svelte-ft07xz")},m(r,o){S(r,e,o),i||(n=[G(e,"mouseenter",l),G(e,"mouseleave",t[4])],i=!0)},p(r,o){t=r},d(r){r&&R(e),i=!1,x(n)}}}function rt(t){let e,i,n;function l(){return t[8](t[11])}return{c(){e=k("div"),C(e,"class","dot svelte-ft07xz")},m(r,o){S(r,e,o),i||(n=[G(e,"mouseenter",l),G(e,"mouseleave",t[4])],i=!0)},p(r,o){t=r},d(r){r&&R(e),i=!1,x(n)}}}function ot(t){let e,i,n;return i=new jt({props:{info:t[0],info_index:t[2]}}),{c(){e=k("div"),Q(i.$$.fragment),C(e,"class","popup svelte-ft07xz")},m(l,r){S(l,e,r),Z(i,e,null),n=!0},p(l,r){const o={};r&1&&(o.info=l[0]),r&4&&(o.info_index=l[2]),i.$set(o)},i(l){n||(z(i.$$.fragment,l),n=!0)},o(l){B(i.$$.fragment,l),n=!1},d(l){l&&R(e),J(i)}}}function Dt(t){let e,i,n,l,r,o,s,u,d,v,y,p,b=Array(t[0].researched),_=[];for(let a=0;a<b.length;a+=1)_[a]=lt(nt(t,b,a));let q=Array(t[0].available-t[0].researched),E=[];for(let a=0;a<q.length;a+=1)E[a]=rt(it(t,q,a));let g=t[1]&&ot(t);return{c(){e=k("div"),i=k("div"),n=k("div"),l=k("img"),o=M(),s=k("div");for(let a=0;a<_.length;a+=1)_[a].c();u=M();for(let a=0;a<E.length;a+=1)E[a].c();d=M(),g&&g.c(),me(l.src,r="https://aoe2techtree.net/img/"+t[0].info_type.replace(/\S/,st)+"s/"+t[0].info_list[t[0].researched<t[0].available-1?t[0].researched:t[0].available-1].id+".png")||C(l,"src",r),C(l,"alt","unit pic"),C(l,"class","svelte-ft07xz"),C(n,"class","icons svelte-ft07xz"),C(s,"class","row svelte-ft07xz"),C(i,"class","popup-container svelte-ft07xz"),C(e,"class","col svelte-ft07xz")},m(a,K){S(a,e,K),h(e,i),h(i,n),h(n,l),h(i,o),h(i,s);for(let c=0;c<_.length;c+=1)_[c]&&_[c].m(s,null);h(s,u);for(let c=0;c<E.length;c+=1)E[c]&&E[c].m(s,null);h(s,d),g&&g.m(s,null),v=!0,y||(p=[G(e,"click",t[5]),G(e,"keydown",Gt)],y=!0)},p(a,[K]){if((!v||K&1&&!me(l.src,r="https://aoe2techtree.net/img/"+a[0].info_type.replace(/\S/,st)+"s/"+a[0].info_list[a[0].researched<a[0].available-1?a[0].researched:a[0].available-1].id+".png"))&&C(l,"src",r),K&25){b=Array(a[0].researched);let c;for(c=0;c<b.length;c+=1){const w=nt(a,b,c);_[c]?_[c].p(w,K):(_[c]=lt(w),_[c].c(),_[c].m(s,u))}for(;c<_.length;c+=1)_[c].d(1);_.length=b.length}if(K&25){q=Array(a[0].available-a[0].researched);let c;for(c=0;c<q.length;c+=1){const w=it(a,q,c);E[c]?E[c].p(w,K):(E[c]=rt(w),E[c].c(),E[c].m(s,d))}for(;c<E.length;c+=1)E[c].d(1);E.length=q.length}a[1]?g?(g.p(a,K),K&2&&z(g,1)):(g=ot(a),g.c(),z(g,1),g.m(s,null)):g&&(re(),B(g,1,1,()=>{g=null}),oe())},i(a){v||(z(g),v=!0)},o(a){B(g),v=!1},d(a){a&&R(e),ue(_,a),ue(E,a),g&&g.d(),y=!1,x(p)}}}function Gt(){}const st=t=>t.toUpperCase();function Wt(t,e,i){let{info:n,onResearched:l}=e,r=!1,o=0;const s=p=>{i(1,r=!0),i(2,o=p)},u=()=>i(1,r=!1);function d(){l(n)}const v=p=>s(p),y=p=>s(p);return t.$$set=p=>{"info"in p&&i(0,n=p.info),"onResearched"in p&&i(6,l=p.onResearched)},[n,r,o,s,u,d,l,v,y]}class Ee extends fe{constructor(e){super(),ce(this,e,Wt,Dt,ae,{info:0,onResearched:6})}}function ut(t,e,i){const n=t.slice();return n[5]=e[i],n}function at(t,e,i){const n=t.slice();return n[8]=e[i],n}function ct(t,e,i){const n=t.slice();return n[11]=e[i],n}function ft(t,e,i){const n=t.slice();return n[8]=e[i],n}function dt(t){let e,i;return e=new Ee({props:{onResearched:t[3],info:t[8]}}),{c(){Q(e.$$.fragment)},m(n,l){Z(e,n,l),i=!0},p(n,l){const r={};l&2&&(r.info=n[8]),e.$set(r)},i(n){i||(z(e.$$.fragment,n),i=!0)},o(n){B(e.$$.fragment,n),i=!1},d(n){J(e,n)}}}function _t(t){let e=t[8].building.includes(t[5].name)&&t[8].type!=="unique",i,n,l=e&&dt(t);return{c(){l&&l.c(),i=Me()},m(r,o){l&&l.m(r,o),S(r,i,o),n=!0},p(r,o){o&2&&(e=r[8].building.includes(r[5].name)&&r[8].type!=="unique"),e?l?(l.p(r,o),o&2&&z(l,1)):(l=dt(r),l.c(),z(l,1),l.m(i.parentNode,i)):l&&(re(),B(l,1,1,()=>{l=null}),oe())},i(r){n||(z(l),n=!0)},o(r){B(l),n=!1},d(r){l&&l.d(r),r&&R(i)}}}function ht(t){let e,i;return e=new Ee({props:{onResearched:t[3],info:t[11]}}),{c(){Q(e.$$.fragment)},m(n,l){Z(e,n,l),i=!0},p(n,l){const r={};l&1&&(r.info=n[11]),e.$set(r)},i(n){i||(z(e.$$.fragment,n),i=!0)},o(n){B(e.$$.fragment,n),i=!1},d(n){J(e,n)}}}function pt(t){let e,i,n=t[11].building===t[5].name&&ht(t);return{c(){n&&n.c(),e=Me()},m(l,r){n&&n.m(l,r),S(l,e,r),i=!0},p(l,r){l[11].building===l[5].name?n?(n.p(l,r),r&1&&z(n,1)):(n=ht(l),n.c(),z(n,1),n.m(e.parentNode,e)):n&&(re(),B(n,1,1,()=>{n=null}),oe())},i(l){i||(z(n),i=!0)},o(l){B(n),i=!1},d(l){n&&n.d(l),l&&R(e)}}}function mt(t){let e,i;return e=new Ee({props:{onResearched:t[3],info:t[8]}}),{c(){Q(e.$$.fragment)},m(n,l){Z(e,n,l),i=!0},p(n,l){const r={};l&2&&(r.info=n[8]),e.$set(r)},i(n){i||(z(e.$$.fragment,n),i=!0)},o(n){B(e.$$.fragment,n),i=!1},d(n){J(e,n)}}}function gt(t){let e=t[8].building.includes(t[5].name)&&t[8].type==="unique",i,n,l=e&&mt(t);return{c(){l&&l.c(),i=Me()},m(r,o){l&&l.m(r,o),S(r,i,o),n=!0},p(r,o){o&2&&(e=r[8].building.includes(r[5].name)&&r[8].type==="unique"),e?l?(l.p(r,o),o&2&&z(l,1)):(l=mt(r),l.c(),z(l,1),l.m(i.parentNode,i)):l&&(re(),B(l,1,1,()=>{l=null}),oe())},i(r){n||(z(l),n=!0)},o(r){B(l),n=!1},d(r){l&&l.d(r),r&&R(i)}}}function bt(t){let e,i,n,l=t[5].short+"",r,o,s,u,d,v,y=t[1],p=[];for(let c=0;c<y.length;c+=1)p[c]=_t(ft(t,y,c));const b=c=>B(p[c],1,1,()=>{p[c]=null});let _=t[0],q=[];for(let c=0;c<_.length;c+=1)q[c]=pt(ct(t,_,c));const E=c=>B(q[c],1,1,()=>{q[c]=null});let g=t[1],a=[];for(let c=0;c<g.length;c+=1)a[c]=gt(at(t,g,c));const K=c=>B(a[c],1,1,()=>{a[c]=null});return{c(){e=k("div"),i=k("div"),n=k("b"),r=U(l),o=M();for(let c=0;c<p.length;c+=1)p[c].c();s=M();for(let c=0;c<q.length;c+=1)q[c].c();u=M();for(let c=0;c<a.length;c+=1)a[c].c();d=M(),C(i,"class","building svelte-1o6bzc3"),C(e,"class","col svelte-1o6bzc3")},m(c,w){S(c,e,w),h(e,i),h(i,n),h(n,r),h(e,o);for(let m=0;m<p.length;m+=1)p[m]&&p[m].m(e,null);h(e,s);for(let m=0;m<q.length;m+=1)q[m]&&q[m].m(e,null);h(e,u);for(let m=0;m<a.length;m+=1)a[m]&&a[m].m(e,null);h(e,d),v=!0},p(c,w){if(w&14){y=c[1];let m;for(m=0;m<y.length;m+=1){const N=ft(c,y,m);p[m]?(p[m].p(N,w),z(p[m],1)):(p[m]=_t(N),p[m].c(),z(p[m],1),p[m].m(e,s))}for(re(),m=y.length;m<p.length;m+=1)b(m);oe()}if(w&13){_=c[0];let m;for(m=0;m<_.length;m+=1){const N=ct(c,_,m);q[m]?(q[m].p(N,w),z(q[m],1)):(q[m]=pt(N),q[m].c(),z(q[m],1),q[m].m(e,u))}for(re(),m=_.length;m<q.length;m+=1)E(m);oe()}if(w&14){g=c[1];let m;for(m=0;m<g.length;m+=1){const N=at(c,g,m);a[m]?(a[m].p(N,w),z(a[m],1)):(a[m]=gt(N),a[m].c(),z(a[m],1),a[m].m(e,d))}for(re(),m=g.length;m<a.length;m+=1)K(m);oe()}},i(c){if(!v){for(let w=0;w<y.length;w+=1)z(p[w]);for(let w=0;w<_.length;w+=1)z(q[w]);for(let w=0;w<g.length;w+=1)z(a[w]);v=!0}},o(c){p=p.filter(Boolean);for(let w=0;w<p.length;w+=1)B(p[w]);q=q.filter(Boolean);for(let w=0;w<q.length;w+=1)B(q[w]);a=a.filter(Boolean);for(let w=0;w<a.length;w+=1)B(a[w]);v=!1},d(c){c&&R(e),ue(p,c),ue(q,c),ue(a,c)}}}function Vt(t){let e,i,n=t[2],l=[];for(let o=0;o<n.length;o+=1)l[o]=bt(ut(t,n,o));const r=o=>B(l[o],1,1,()=>{l[o]=null});return{c(){e=k("div");for(let o=0;o<l.length;o+=1)l[o].c();C(e,"class","row svelte-1o6bzc3")},m(o,s){S(o,e,s);for(let u=0;u<l.length;u+=1)l[u]&&l[u].m(e,null);i=!0},p(o,[s]){if(s&15){n=o[2];let u;for(u=0;u<n.length;u+=1){const d=ut(o,n,u);l[u]?(l[u].p(d,s),z(l[u],1)):(l[u]=bt(d),l[u].c(),z(l[u],1),l[u].m(e,null))}for(re(),u=n.length;u<l.length;u+=1)r(u);oe()}},i(o){if(!i){for(let s=0;s<n.length;s+=1)z(l[s]);i=!0}},o(o){l=l.filter(Boolean);for(let s=0;s<l.length;s+=1)B(l[s]);i=!1},d(o){o&&R(e),ue(l,o)}}}function Xt(t,e,i){let{display_units:n,display_techs:l,researched:r}=e;const o=[{name:"eco",short:"eco"},{name:"blacksmith",short:"smith"},{name:"archery",short:"archery"},{name:"barracks",short:"barrak"},{name:"stable",short:"stable"},{name:"workshop",short:"seige"},{name:"castle",short:"castle"},{name:"university",short:"uni"},{name:"monastery",short:"monk"}],s=function(u){r(u)};return t.$$set=u=>{"display_units"in u&&i(0,n=u.display_units),"display_techs"in u&&i(1,l=u.display_techs),"researched"in u&&i(4,r=u.researched)},[n,l,o,s,r]}class Zt extends fe{constructor(e){super(),ce(this,e,Xt,Vt,ae,{display_units:0,display_techs:1,researched:4})}}const Jt=`<!DOCTYPE html>\r
<html>\r
<head>\r
  <meta charset="UTF-8">\r
  <title>Aoe2 Build Tracker</title>\r
  <style>\r
    .grid {\r
      display: grid;\r
      grid-template-columns: 3fr repeat(4, 1fr);\r
	  width:500px;\r
    }\r
    .grid div {\r
      padding: 5px;\r
	  border-top: 1px solid lightgrey;\r
	  border-right: 1px solid lightgrey;\r
      text-align: center;\r
    }\r
  </style>\r
</head>\r
<body>\r
  <div class="grid">\r
	<div>Desc</div>\r
    <div>wood</div>\r
    <div>food</div>\r
    <div>gold</div>\r
    <div>stone</div>`;function Yt(t){let e,i,n,l,r,o,s,u,d,v,y,p;return{c(){e=k("div"),i=k("div"),n=U(t[1]),l=M(),r=k("input"),o=M(),s=k("div"),u=k("button"),u.textContent="-",d=M(),v=k("button"),v.textContent="+",C(r,"type","number"),C(r,"class","svelte-oqf2v4"),C(i,"class","res svelte-oqf2v4"),C(u,"class","svelte-oqf2v4"),C(v,"class","svelte-oqf2v4"),C(s,"class","buttons svelte-oqf2v4"),C(e,"class","container svelte-oqf2v4")},m(b,_){S(b,e,_),h(e,i),h(i,n),h(i,l),h(i,r),Se(r,t[0]),h(e,o),h(e,s),h(s,u),h(s,d),h(s,v),y||(p=[G(r,"input",t[5]),G(u,"click",t[3]),G(v,"click",t[2])],y=!0)},p(b,[_]){_&2&&D(n,b[1]),_&1&&qt(r.value)!==b[0]&&Se(r,b[0])},i:X,o:X,d(b){b&&R(e),y=!1,x(p)}}}function Qt(t,e,i){let{value:n=0}=e,{label:l="none"}=e,{ResourceUpdate:r}=e;function o(){r(l,1)}function s(){r(l,-1)}function u(){n=qt(this.value),i(0,n)}return t.$$set=d=>{"value"in d&&i(0,n=d.value),"label"in d&&i(1,l=d.label),"ResourceUpdate"in d&&i(4,r=d.ResourceUpdate)},[n,l,o,s,r,u]}class Ae extends fe{constructor(e){super(),ce(this,e,Qt,Yt,ae,{value:0,label:1,ResourceUpdate:4})}}function yt(t){let e,i,n;return{c(){e=k("button"),e.textContent=">",C(e,"class","transport-button svelte-bwl8iq")},m(l,r){S(l,e,r),i||(n=G(e,"click",t[12]),i=!0)},p:X,d(l){l&&R(e),i=!1,n()}}}function xt(t){let e,i,n,l,r,o,s,u,d,v,y,p,b,_,q,E,g,a,K,c,w,m,N,ee,j,$,te,Y,W,L,F,I,H,T,O,ge,ke,be,ne,le,ye,we,f=t[7]==="playback"&&yt(t);N=new Ee({props:{onResearched:t[17],info:t[9]}});function P(A){t[20](A)}let ie={label:"wood",ResourceUpdate:t[15]};t[2]!==void 0&&(ie.value=t[2]),$=new Ae({props:ie}),he.push(()=>Te($,"value",P));function Tt(A){t[21](A)}let Ne={label:"food",ResourceUpdate:t[15]};t[3]!==void 0&&(Ne.value=t[3]),W=new Ae({props:Ne}),he.push(()=>Te(W,"value",Tt));function At(A){t[22](A)}let $e={label:"gold",ResourceUpdate:t[15]};t[4]!==void 0&&($e.value=t[4]),I=new Ae({props:$e}),he.push(()=>Te(I,"value",At));function Rt(A){t[23](A)}let He={label:"stone",ResourceUpdate:t[15]};return t[5]!==void 0&&(He.value=t[5]),O=new Ae({props:He}),he.push(()=>Te(O,"value",Rt)),ne=new Zt({props:{researched:t[17],display_units:t[0],display_techs:t[1]}}),{c(){e=k("main"),i=k("button"),i.textContent="Reset",n=M(),l=k("button"),l.textContent="Play",r=M(),o=k("button"),o.textContent="Record",s=M(),u=U(t[7]),d=M(),v=k("button"),v.textContent="Report",y=M(),p=k("article"),b=U(`Time\r
		`),_=k("input"),q=M(),f&&f.c(),E=M(),g=k("label"),a=U(t[8]),K=M(),c=k("article"),w=k("div"),m=U(`age\r
			`),Q(N.$$.fragment),ee=M(),j=k("div"),Q($.$$.fragment),Y=M(),Q(W.$$.fragment),F=M(),Q(I.$$.fragment),T=M(),Q(O.$$.fragment),ke=M(),be=k("div"),Q(ne.$$.fragment),C(_,"class","gametime svelte-bwl8iq"),C(_,"type","text"),C(g,"class","svelte-bwl8iq"),Je(g,"fadeit",t[10]),C(p,"class","timer svelte-bwl8iq"),C(c,"class","svelte-bwl8iq"),C(j,"class","counter-container svelte-bwl8iq")},m(A,V){S(A,e,V),h(e,i),h(e,n),h(e,l),h(e,r),h(e,o),h(e,s),h(e,u),h(e,d),h(e,v),h(e,y),h(e,p),h(p,b),h(p,_),Se(_,t[6]),h(p,q),f&&f.m(p,null),h(p,E),h(p,g),h(g,a),h(e,K),h(e,c),h(c,w),h(w,m),Z(N,w,null),h(e,ee),h(e,j),Z($,j,null),h(j,Y),Z(W,j,null),h(j,F),Z(I,j,null),h(j,T),Z(O,j,null),h(e,ke),h(e,be),Z(ne,be,null),le=!0,ye||(we=[G(window,"keydown",t[16]),G(i,"click",t[11]),G(l,"click",t[13]),G(o,"click",t[14]),G(v,"click",t[18]),G(_,"input",t[19])],ye=!0)},p(A,V){(!le||V[0]&128)&&D(u,A[7]),V[0]&64&&_.value!==A[6]&&Se(_,A[6]),A[7]==="playback"?f?f.p(A,V):(f=yt(A),f.c(),f.m(p,E)):f&&(f.d(1),f=null),(!le||V[0]&256)&&D(a,A[8]),(!le||V[0]&1024)&&Je(g,"fadeit",A[10]);const je={};V[0]&512&&(je.info=A[9]),N.$set(je);const De={};!te&&V[0]&4&&(te=!0,De.value=A[2],Ce(()=>te=!1)),$.$set(De);const Ge={};!L&&V[0]&8&&(L=!0,Ge.value=A[3],Ce(()=>L=!1)),W.$set(Ge);const We={};!H&&V[0]&16&&(H=!0,We.value=A[4],Ce(()=>H=!1)),I.$set(We);const Ve={};!ge&&V[0]&32&&(ge=!0,Ve.value=A[5],Ce(()=>ge=!1)),O.$set(Ve);const Ke={};V[0]&1&&(Ke.display_units=A[0]),V[0]&2&&(Ke.display_techs=A[1]),ne.$set(Ke)},i(A){le||(z(N.$$.fragment,A),z($.$$.fragment,A),z(W.$$.fragment,A),z(I.$$.fragment,A),z(O.$$.fragment,A),z(ne.$$.fragment,A),le=!0)},o(A){B(N.$$.fragment,A),B($.$$.fragment,A),B(W.$$.fragment,A),B(I.$$.fragment,A),B(O.$$.fragment,A),B(ne.$$.fragment,A),le=!1},d(A){A&&R(e),f&&f.d(),J(N),J($),J(W),J(I),J(O),J(ne),ye=!1,x(we)}}}let Ue=588;function Fe(t){let e,i,n;return e=Math.floor(t/1e3/60/60),i=Math.floor((t/1e3/60/60-e)*60),n=Math.floor(((t/1e3/60/60-e)*60-i)*60),n<10?n=`0${n}`:n=`${n}`,i<10?i=`0${i}`:i=`${i}`,`${e}:${i}:${n}`}function ei(t,e){let i=null;switch(t){case"wood":i=e>0?"KeyA":"KeyZ";break;case"food":i=e>0?"KeyS":"KeyX";break;case"gold":i=e>0?"KeyD":"KeyC";break;case"stone":i=e>0?"KeyF":"KeyV";break}return i}function ti(t){const e=new Blob([t],{type:"text/plain"}),i=URL.createObjectURL(e),n=document.createElement("a");n.href=i,n.download="report.html",n.click(),URL.revokeObjectURL(i)}function ii(t,e,i){let{display_units:n,display_techs:l}=e,r=0,o=0,s=0,u=0,d,v,y="0:00:00",p="stopped",b=[],_=0,q=0,E="",g={info_type:"age",researched:0,available:3,info_list:[{type:"ages",name:"Feudal Age",id:"feudal_age_de",Cost:{Food:500},ResearchTime:130},{type:"ages",name:"Castle Age",id:"castle_age_de",Cost:{Food:800,Gold:200},ResearchTime:160},{type:"ages",name:"Imperial Age",id:"imperial_age_de",Cost:{Food:1e3,Gold:800},ResearchTime:190}]},a=!1;K();function K(){i(8,E=""),d=Date.now(),v=0,i(2,r=i(3,o=i(4,s=i(5,u=0)))),i(9,g.researched=0,g),clearTimeout(g.timeout),i(9,g.timeout=0,g),n.forEach(f=>f.researched=0),l.forEach(f=>f.researched=0),_=0,clearTimeout(g.research_timeout),clearTimeout(g.text_timeout),i(9,g.research_timeout=0,g),i(9,g.text_timeout=0,g),n.forEach(f=>{f.research_timeout&&clearTimeout(f.research_timeout),f.research_timeout=0,f.text_timeout&&clearTimeout(f.text_timeout),f.text_timeout=0}),l.forEach(f=>{f.research_timeout&&clearTimeout(f.research_timeout),f.research_timeout=0,f.text_timeout&&clearTimeout(f.text_timeout),f.text_timeout=0}),q&&clearInterval(q),q=0,i(9,g),i(0,n),i(1,l)}function c(){i(7,p="playback"),K(),q=setInterval(j,Ue)}function w(){i(7,p="record"),K(),b=[],q=setInterval(te,Ue)}function m(){return v=(Date.now()-d)*1.7,v}function N(){p==="playback"?v+=Ue:v=m(),i(6,y=Fe(v))}function ee(f){f.text_timeout=0,i(10,a=!0)}function j(){if(N(),_<b.length)for(;_<b.length&&v>b[_].t;){if(b[_].type==="key")L(b[_].code,b[_].count);else{clearTimeout(f.text_timeout);const f=b[_].code;i(10,a=!1),i(8,E=f.info_list[f.researched].name),f.text_timeout=setTimeout(ee,2e3,f);const P=f.info_list[f.researched].ResearchTime*1e3;f.research_timeout=setTimeout(T,P,f),f.researched<f.available-1&&f.researched++,i(9,g),i(0,n),i(1,l)}_++}else clearInterval(q),q=0}function $(){v=b[_].t}function te(){N()}function Y(){c()}function W(){w()}function L(f,P){switch(f){case"KeyA":case"KeyZ":i(2,r+=P);break;case"KeyS":case"KeyX":i(3,o+=P);break;case"KeyD":case"KeyC":i(4,s+=P);break;case"KeyF":case"KeyV":i(5,u+=P);break}r<0&&i(2,r=0),o<0&&i(3,o=0),s<0&&i(4,s=0),u<0&&i(5,u=0)}function F(f,P){const ie=m();b.length>0&&ie-b[b.length-1].last_update<5e3&&b[b.length-1].code===f?(b[b.length-1].count+=P,b[b.length-1].last_update=ie):b.push({t:ie,type:"key",code:f,count:P,last_update:ie})}function I(f,P){if(p==="playback")return;const ie=ei(f,P);F(ie,P),L(ie,P)}function H(f){if(p==="playback")return;let P=-1;["KeyA","KeyS","KeyD","KeyF"].includes(f.code)&&(P=1),F(f.code,P),L(f.code,P)}function T(f){f.research_timeout=0,i(10,a=!1),clearTimeout(f.text_timeout),i(8,E=f.info_list[f.researched-1].name+" finished"),f.text_timeout=setTimeout(ee,2e3,f)}function O(f){if(p==="playback")return;clearTimeout(f.research_timeout),clearTimeout(f.text_timeout),f.text_timeout=0;const P=f.info_list[f.researched].ResearchTime*1e3;f.research_timeout=setTimeout(T,P,f),f.researched<f.available-1&&f.researched++,i(9,g),i(0,n),i(1,l),b.push({t:v,type:"research",code:f})}function ge(){let f=Jt;return b.forEach(P=>{P.type==="key"?(L(P.code,P.count),f+=`<div>${Fe(P.t)}</div><div>${r}</div> <div>${o}</div> <div>${s}</div> <div>${u}</div>
`):P.type==="research"&&(f+=`<div>${Fe(P.t)}-${P.code.info_list[P.code.researched++].name}</div><div></div><div></div><div></div><div></div>
`)}),f+=`</div>
</body>
</html>
`,f}function ke(){K();const f=ge();ti(f)}function be(){y=this.value,i(6,y)}function ne(f){r=f,i(2,r)}function le(f){o=f,i(3,o)}function ye(f){s=f,i(4,s)}function we(f){u=f,i(5,u)}return t.$$set=f=>{"display_units"in f&&i(0,n=f.display_units),"display_techs"in f&&i(1,l=f.display_techs)},[n,l,r,o,s,u,y,p,E,g,a,K,$,Y,W,I,H,O,ke,be,ne,le,ye,we]}class ni extends fe{constructor(e){super(),ce(this,e,ii,xt,ae,{display_units:0,display_techs:1},null,[-1,-1])}}function vt(t,e,i){const n=t.slice();return n[6]=e[i],n}function kt(t){let e,i=t[6]+"",n,l,r;return{c(){e=k("option"),n=U(i),l=M(),e.__value=r=t[6],e.value=e.__value},m(o,s){S(o,e,s),h(e,n),h(e,l)},p(o,s){s&1&&i!==(i=o[6]+"")&&D(n,i),s&1&&r!==(r=o[6])&&(e.__value=r,e.value=e.__value)},d(o){o&&R(e)}}}function li(t){let e,i,n,l,r=t[0],o=[];for(let s=0;s<r.length;s+=1)o[s]=kt(vt(t,r,s));return{c(){e=k("div"),i=k("select");for(let s=0;s<o.length;s+=1)o[s].c();t[1]===void 0&&ze(()=>t[4].call(i)),C(e,"class","civcount svelte-1w8wol8")},m(s,u){S(s,e,u),h(e,i);for(let d=0;d<o.length;d+=1)o[d]&&o[d].m(i,null);Ze(i,t[1],!0),n||(l=[G(i,"change",t[4]),G(i,"change",t[2]),zt(ri.call(null,i))],n=!0)},p(s,[u]){if(u&1){r=s[0];let d;for(d=0;d<r.length;d+=1){const v=vt(s,r,d);o[d]?o[d].p(v,u):(o[d]=kt(v),o[d].c(),o[d].m(i,null))}for(;d<o.length;d+=1)o[d].d(1);o.length=r.length}u&3&&Ze(i,s[1])},i:X,o:X,d(s){s&&R(e),ue(o,s),n=!1,x(l)}}}function ri(t){t.focus()}function oi(t,e,i){let{changeCiv:n,civnames:l}=e,r="Armenians";const o=()=>{n(r)};function s(){r=Et(this),i(1,r),i(0,l)}return t.$$set=u=>{"changeCiv"in u&&i(3,n=u.changeCiv),"civnames"in u&&i(0,l=u.civnames)},[l,r,o,n,s]}class si extends fe{constructor(e){super(),ce(this,e,oi,li,ae,{changeCiv:3,civnames:0})}}function ui(t){let e;return{c(){e=k("p"),e.textContent="Loading...",C(e,"class","svelte-17eambd")},m(i,n){S(i,e,n)},p:X,i:X,o:X,d(i){i&&R(e)}}}function ai(t){let e,i,n,l,r,o,s;return n=new si({props:{changeCiv:t[4],civnames:t[3]}}),o=new ni({props:{display_units:t[1],display_techs:t[2]}}),{c(){e=k("main"),i=k("div"),Q(n.$$.fragment),l=M(),r=k("div"),Q(o.$$.fragment),C(e,"class","svelte-17eambd")},m(u,d){S(u,e,d),h(e,i),Z(n,i,null),h(e,l),h(e,r),Z(o,r,null),s=!0},p(u,d){const v={};d&8&&(v.civnames=u[3]),n.$set(v);const y={};d&2&&(y.display_units=u[1]),d&4&&(y.display_techs=u[2]),o.$set(y)},i(u){s||(z(n.$$.fragment,u),z(o.$$.fragment,u),s=!0)},o(u){B(n.$$.fragment,u),B(o.$$.fragment,u),s=!1},d(u){u&&R(e),J(n),J(o)}}}function ci(t){let e,i,n,l;const r=[ai,ui],o=[];function s(u,d){return u[0]?0:1}return e=s(t),i=o[e]=r[e](t),{c(){i.c(),n=Me()},m(u,d){o[e].m(u,d),S(u,n,d),l=!0},p(u,[d]){let v=e;e=s(u),e===v?o[e].p(u,d):(re(),B(o[v],1,1,()=>{o[v]=null}),oe(),i=o[e],i?i.p(u,d):(i=o[e]=r[e](u),i.c()),z(i,1),i.m(n.parentNode,n))},i(u){l||(z(i),l=!0)},o(u){B(i),l=!1},d(u){o[e].d(u),u&&R(n)}}}function fi(t,e,i){let n=!1,l=null,r=null,o,s,u,d;function v(){i(3,d=Object.keys(l.civ_names))}function y(_){const q=l.civ_helptexts[_],E=r[q],g=Bt.slice(),a=l.techtrees[_].units,K=g.filter(L=>a.map(F=>F.id).includes(L.id)),c=Ot.slice(),w=l.techtrees[_].techs,m=c.filter(L=>w.map(F=>F.id).includes(L.id)),N=K.map(L=>({...L,...l.data.units[L.id],name:r[l.data.units[L.id].LanguageNameId]})),ee=m.map(L=>({...L,...l.data.techs[L.id],name:r[l.data.techs[L.id].LanguageNameId]})),j=l.techtrees[_].unique,$=l.data.units[j.castleAgeUniqueUnit],te=r[$.LanguageNameId],Y=l.data.units[j.imperialAgeUniqueUnit],W=r[Y.LanguageNameId];return u={castle:{info:{info_index:0,info_type:"unit",info_list:[{...$,name:te}]}},imperial:{info:{info_index:0,info_type:"unit",info_list:[{...Y,name:W}]}}},i(1,o=N.reduce((L,F)=>{if(L.length===0)return[{...F,available:1,researched:0,info_type:"unit",next:!0,info_list:[F]}];const I=L[L.length-1];return I.type===F.type?(I.available+=1,I.info_list=I.info_list.concat(F),L):[...L,{...F,available:1,researched:0,info_type:"unit",info_list:[F],next:I.building!==F.building}]},[])),i(2,s=ee.reduce((L,F)=>{if(L.length===0)return[{...F,available:1,researched:0,info_type:"tech",info_list:[F]}];const I=L[L.length-1];return I.building===F.building&&I.type!=="unique"&&I.type===F.type?(I.available+=1,I.info_list=I.info_list.concat(F),L):[...L,{...F,available:1,researched:0,info_type:"tech",info_list:[F]}]},[])),{civdesc:E,display_units:o,display_techs:s,display_unique:u}}const p=fetch("https://raw.githubusercontent.com/SiegeEngineers/aoe2techtree/master/data/locales/en/strings.json").then(_=>_.json()).then(_=>{r=_}).catch(_=>console.error("Error fetching strings:",_)),b=fetch("https://raw.githubusercontent.com/SiegeEngineers/aoe2techtree/master/data/data.json").then(_=>_.json()).then(_=>{l=_,v(),y("Armenians")}).catch(_=>console.error("Error fetching JSON:",_));return Promise.all([p,b]).then(()=>{i(0,n=!0)}),[n,o,s,d,y]}class di extends fe{constructor(e){super(),ce(this,e,fi,ci,ae,{})}}new di({target:document.getElementById("app")});
